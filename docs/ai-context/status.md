# 프로젝트 상태 (Status)

## 현재 진행 상황
- **SMB 게이트웨이 1차 적용 완료 (#161, 2026-02-27)**:
    - 백엔드:
      - `/api/status` 프로토콜 목록에 `smb` 상태(`external`)를 추가해 코어 내장 서버가 아닌 외부 게이트웨이 모델을 명시.
      - FTP 서비스 시작 판정을 타이머 기반에서 포트 프로빙 + settle 재확인 방식으로 보강.
      - FTP 경계 테스트 추가(`driver_test`, `service_test`).
      - 개발 기본 설정의 FTP 기본값을 `false`로 고정.
    - 프론트:
      - 상태 팝오버 프로토콜 순서/라벨에 `SMB` 추가(`WEB -> WebDAV -> FTP -> SFTP -> SMB`).
      - `serverStatus.status.external` 상태 라벨(ko/en) 추가.
      - Settings > 서버에 `SMB 게이트웨이` 안내 카드 추가(Windows/macOS 연결 경로, 운영 가이드 링크).
    - 문서:
      - SMB 운영 문서 신규 추가: `docs/smb_gateway.md` (Samba 예시, 보안 가드, Windows/macOS 연결 절차).
      - README에 SMB(외부 게이트웨이) 지원 경로 및 운영 가이드 링크 반영.
    - 검증:
      - `cd apps/backend && go test ./...` 통과.
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.

- **FTP 서버 재도입 1차 완료 (#160, 2026-02-26)**:
    - 백엔드:
      - `internal/ftp` 모듈 복원 및 `main` lifecycle(start/stop/restart/shutdown) 연동.
      - 설정 모델/기본 config에 `ftp_enabled`, `ftp_port` 복원(기본 비활성).
      - 설정 검증에 FTP 포트 범위/포트 충돌(`WEB`, `SFTP`) 규칙 추가.
      - `/api/status`에 FTP 헬스체크 복원.
    - 프론트:
      - 설정 화면에 FTP 카드(활성화/포트) 및 평문 보안 경고 추가.
      - 상태 팝오버 프로토콜 순서에 FTP 복원(`WEB -> WebDAV -> FTP -> SFTP`).
      - 설정 API 타입/다국어 리소스(ko/en) FTP 키 확장.
    - 검증:
      - `cd apps/backend && go test ./...` 통과.
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.

- **FTP/SMB 정책/아키텍처 1차 확정 (#159, 2026-02-26)**:
    - 배경:
      - 사용자 요청(네트워크 드라이브 UX)과 기존 `FTP 제거 + SFTP 단일화` 결정 간 충돌이 발생.
    - 결정:
      - 기본 프로토콜 범위는 `WEB/WebDAV/SFTP` 유지.
      - FTP는 기본 비활성(옵트인) 재도입 정책으로 전환.
      - SMB는 코어 내장 대신 외부 게이트웨이(Samba) 방식으로 1차 추진.
      - 실행 순서를 `#159 -> #160 -> #161`로 고정.
    - 이슈 상태:
      - `#158` 부모 이슈: 완료
      - `#159` 정책 확정: 완료
      - `#160` FTP 1차: 완료
      - `#161` SMB 게이트웨이 1차: 완료

- **WebDAV PROPFIND 깊이 제한으로 과부하 방지 (2026-02-26)**:
    - 문제:
      - 일부 WebDAV 클라이언트의 `PROPFIND`가 `Depth: infinity`(또는 Depth 생략)로 들어오며 하위 전체 재귀 스캔이 발생해 서비스 과부하를 유발할 수 있었다.
    - 백엔드:
      - 인증 이후 `PROPFIND` 요청의 Depth를 정규화:
        - 허용: `0`, `1`
        - 그 외(`infinity`/생략/비정상 값): `1`로 강제
      - 구현 파일:
        - `apps/backend/internal/webdav/handler/webdav_handler.go`
        - `apps/backend/internal/webdav/handler/webdav_handler_test.go`
    - 검증:
      - `cd apps/backend && go test ./internal/webdav/...` 통과.
      - `cd apps/backend && go test ./...` 통과.

- **GitHub Actions Go 캐시 경로 보정 (2026-02-26)**:
    - 문제:
      - 모노레포 구조에서 `go.sum`이 루트가 아닌 `apps/backend/go.sum`에 위치해 `actions/setup-go` 캐시 복원 단계에서 실패 메시지가 발생할 수 있었다.
    - CI/Release:
      - `Setup Go` 단계에 `cache-dependency-path: apps/backend/go.sum`을 추가해 캐시 의존 파일 경로를 명시.
      - 구현 파일:
        - `.github/workflows/ci.yml`
        - `.github/workflows/release.yml`

- **WebDAV OPTIONS 401 차단 완화 (2026-02-26)**:
    - 문제:
      - WebDAV 핸들러가 메서드 구분 없이 Basic Auth를 먼저 검사해, 인증 헤더 없는 `OPTIONS` 요청도 즉시 `401`로 차단됐다.
      - 일부 클라이언트에서는 핸드셰이크 단계에서 자격증명 입력 흐름이 시작되지 않아 연결 UX가 저하됐다.
    - 백엔드:
      - 루트 경로(`OPTIONS /dav`, `OPTIONS /dav/`)만 무인증 `200`으로 허용해 WebDAV 핸드셰이크를 통과시킴.
      - 하위 경로 `OPTIONS`와 실제 리소스 접근 메서드(`PROPFIND/GET/PUT...`)는 기존대로 Basic Auth를 강제.
      - 루트 `OPTIONS` 응답은 WebDAV root handler로 위임해 경로/서버 동작과 일치한 capability 헤더를 사용.
      - 구현 파일:
        - `apps/backend/internal/webdav/handler/webdav_handler.go`
        - `apps/backend/internal/webdav/handler/webdav_handler_test.go`
    - 검증:
      - `cd apps/backend && go test ./internal/webdav/...` 통과.
      - `cd apps/backend && go test ./...` 통과.

- **WebDAV 루트 `/dav` 301 리다이렉트로 인한 405 회귀 수정 (2026-02-25)**:
    - 문제:
      - 서버가 `/dav/`만 등록되어 있어 `/dav` 요청이 `301 -> /dav/`로 리다이렉트됨.
      - 일부 WebDAV 클라이언트가 리다이렉트 이후 메서드(`PROPFIND`/`OPTIONS`)를 `GET`으로 바꿔 재요청해 `405 Method Not Allowed`가 발생.
      - 결과적으로 DAV 루트 연결 시 Space 목록 조회가 실패할 수 있었음.
    - 백엔드:
      - WebDAV 라우트를 `/dav`와 `/dav/` 모두 등록해 리다이렉트를 제거.
      - `registerWebDAVRoutes` 헬퍼 분리 및 `/dav`·`/dav/`·`/dav/{space}` 회귀 테스트 추가.
      - 구현 파일:
        - `apps/backend/main.go`
        - `apps/backend/main_test.go`
    - 검증:
      - `cd apps/backend && go test ./...` 통과.

- **Windows C 드라이브 경로 정규화 보강 (2026-02-25)**:
    - 문제:
      - Windows에서 `C:` 형태 경로가 들어오면 드라이브 루트(`C:\`)가 아닌 드라이브 현재 작업 디렉터리로 해석될 수 있어, C 드라이브 하위 폴더 목록이 실제와 다를 수 있었다.
      - 경로 입력이 `C:foo`(drive-relative), `C:/...`, UNC(`\\server\share`) 등으로 섞이면 OS/입력 형태에 따라 해석이 달라질 수 있었다.
    - 백엔드:
      - `browse.Service`에 OS별 경로 정규화 계층 추가(`normalizeBrowsePathForOS`).
      - Windows 경로 정규화에서 아래 케이스를 일관 처리:
        - drive root: `C:`, `C:/`, `C:\.`
        - drive-relative: `C:foo` -> `C:\foo`
        - UNC: `\\server\share\...`
      - mountpoint dedupe는 Windows에서만 case-insensitive로 처리하고, 비-Windows는 원문 case를 유지.
      - 비-Windows 경로는 `TrimSpace`를 적용하지 않고 원문 경로 의미를 보존.
      - 파티션 mountpoint 초기화 및 `ListDirectory` 진입 경로에 동일 정규화 적용.
      - 구현 파일:
        - `apps/backend/internal/browse/service.go`
        - `apps/backend/internal/browse/service_test.go`
    - 검증:
      - `cd apps/backend && go test ./internal/browse/...` 통과.
      - `cd apps/backend && go test ./...` 통과.

- **휴지통 화면/트리 전환 UX 버그 수정 (2026-02-25)**:
    - 문제:
      - Space가 0개일 때 `/trash`가 조기 `Empty` 반환으로 인해 휴지통 기본 레이아웃 없이 보임.
      - `/trash`에서 Space 트리를 클릭해도 기존 선택과 동일하면 `onSelect`가 생략되어 `/` 전환이 막힘.
    - 프론트:
      - `TrashExplorer`의 Space 0개 조기 반환 제거, 테이블 empty 상태에서만 `noConnectedSpace` 문구 노출.
      - `FolderTree`에 `bypassSameSelectionGuard` 옵션 추가, `MainSider`에서 검색/휴지통 모드일 때 활성화.
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/TrashExplorer.tsx`
        - `apps/frontend/src/features/browse/components/FolderTree.tsx`
        - `apps/frontend/src/components/layout/MainLayout/MainSider.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.

- **PID 파일 + 종료 스크립트(Shutdown 파일) 추가 (2026-02-25)**:
    - 백엔드:
      - 실행 시 실행파일 루트에 `cohesion.pid`를 기록하고 종료 시 정리하도록 적용.
      - 구현 파일:
        - `apps/backend/main.go`
    - 릴리즈 스크립트:
      - macOS/Linux용 `stop-cohesion.command` 추가 (PID 기반 graceful 종료, 필요 시 강제 종료).
      - Windows용 `stop-cohesion.bat` 추가 (PID 기반 종료).
      - GoReleaser 아카이브에 두 스크립트 포함.
      - 구현 파일:
        - `apps/backend/scripts/release/stop-cohesion.command`
        - `apps/backend/scripts/release/stop-cohesion.bat`
        - `.goreleaser.yaml`
    - 검증:
      - `cd apps/backend && go test ./...` 통과.

- **실행파일 루트 `logs` 디렉터리 로그 통합 (2026-02-25)**:
    - 백엔드:
      - 서버 시작 시 실행파일 경로 기준 `logs/app.log`를 자동 생성하고 로그를 append로 기록.
      - 개발 모드에서는 기존 콘솔 로그를 유지하면서 `app.log`에도 동시 기록.
      - 프로덕션 모드에서는 `app.log`를 기본 로그 출력으로 사용.
      - 구현 파일:
        - `apps/backend/main.go`
    - 업데이터:
      - 업데이터 실행 로그를 실행파일 루트 `logs/updater.log`에 append 기록.
      - 업데이트 완료 후 재시작되는 앱 프로세스의 `stdout/stderr`를 `logs/app.log`로 리다이렉트.
      - 구현 파일:
        - `apps/backend/cmd/updater/main.go`
    - 검증:
      - `cd apps/backend && go test ./...` 통과.

- **DB 초기화 후 stale 인증 세션 허용 버그 수정 (2026-02-25)**:
    - 문제:
      - DB 삭제/재생성 이후에도 기존 JWT가 유효해 `/api/auth/me`와 일부 API가 인증된 것처럼 동작.
      - 역할 기반 API(`/api/spaces` 등)는 통과하지만, space 리소스 권한 API(`.../browse`)는 사용자 조회 실패로 막혀 UI가 비정상 상태로 보임.
    - 백엔드:
      - 인증 미들웨어에서 토큰 파싱 후 현재 DB 사용자 실체를 강제 검증.
      - 검증 성공 시 claims를 DB 사용자 정보로 동기화(닉네임/역할 포함)하여 stale 클레임 의존도를 낮춤.
      - refresh 토큰 경로에도 동일 사용자 검증 로직 적용.
      - 재생성 사용자와 기존 토큰 구분을 위해 `created_at` vs token `issuedAt`(초 단위) 검증 추가.
      - 구현 파일:
        - `apps/backend/internal/auth/service.go`
        - `apps/backend/internal/auth/middleware.go`
        - `apps/backend/internal/auth/middleware_test.go`
        - `apps/backend/internal/auth/service_test.go`
    - 검증:
      - `cd apps/backend && go test ./internal/auth/...` 통과.
      - `cd apps/backend && go test ./...` 통과.

- **휴지통 + Space 생성 모달 트리 확장 루프 수정 (2026-02-25)**:
    - 문제:
      - 스페이스가 0개인 상태에서 `/trash` 진입 시 `TrashExplorer`가 `fetchSpaces()`를 반복 호출.
      - 이로 인해 `FolderTree(showBaseDirectories)` 초기화 effect가 반복 실행되며 모달 트리 확장 상태가 즉시 초기화됨.
    - 프론트:
      - `TrashExplorer`에서 빈 스페이스일 때 반복 `fetchSpaces()`를 제거하고 로컬 selection/state만 정리하도록 변경.
      - `FolderTree` 초기화 effect를 분리:
        - `showBaseDirectories=true` 전용 effect (base dirs 로드)
        - 일반 스페이스 트리 전용 effect
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/TrashExplorer.tsx`
        - `apps/frontend/src/features/browse/components/FolderTree.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.

- **별도 업데이터 1차(MVP) 구현 (2026-02-24)**:
    - 백엔드:
      - `system` API 확장:
        - `POST /api/system/update/start`
        - `GET /api/system/update/status`
      - `SelfUpdateManager` 추가:
        - 최신 릴리즈/자산 조회
        - 현재 OS/아키텍처용 아카이브 선택
        - `checksums.txt` 기반 SHA-256 검증
        - 새 바이너리 추출 후 별도 업데이터 프로세스 실행
        - 업데이트 API 권한 매핑(`server.config.read/write`) 보강
        - 전환 상태(`switching`)에서는 중복 시작이 되지 않도록 러닝 상태 유지
        - 임시 디렉토리 정리를 업데이터 프로세스로 위임(`--cleanup-dir`)
      - 업데이터 연동용 종료 채널(`shutdownChan`)을 메인 루프에 추가해, 업데이터 실행 후 서버를 정상 종료하도록 구성.
      - 구현 파일:
        - `apps/backend/internal/system/handler.go`
        - `apps/backend/internal/system/self_update.go`
        - `apps/backend/main.go`
        - `apps/backend/cmd/updater/main.go`
        - `apps/backend/internal/system/self_update_test.go`
        - `apps/backend/internal/system/handler_test.go`
    - 릴리즈:
      - GoReleaser에 `updater` 빌드 타깃 추가(`cohesion-updater`) 및 아카이브 동봉.
      - 구현 파일:
        - `.goreleaser.yaml`
    - 프론트:
      - `About` 섹션에서 업데이트 시작 API 호출/상태 폴링 훅 추가.
      - 업데이트 가능 시 `업데이트` 버튼으로 self-update 시작.
      - 업데이트가 없을 때도 테스트 목적으로 동일 버전 강제 재설치(`force`) 시작 지원.
      - update-check 실패(`updateInfo=null`) 시 강제재설치 오판이 발생하지 않도록 force 조건 보정.
      - 구현 파일:
        - `apps/frontend/src/api/config.ts`
        - `apps/frontend/src/features/status/hooks/useSelfUpdate.ts`
        - `apps/frontend/src/pages/Settings/sections/AboutSettings.tsx`
        - `apps/frontend/src/i18n/resources.ts`
    - 검증:
      - `cd apps/backend && go test ./...` 통과.
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.
      - `pnpm release:check` 통과.

- **설정 About/버전 정보 섹션 추가 및 구조 정리 (2026-02-24)**:
    - 프론트:
      - Settings 좌측 메뉴 하단에 `About` 섹션을 추가.
      - `AboutSettings` 섹션 신설:
        - `Cohesion` 카드(서비스 설명 + GitHub 링크)
        - `버전 정보` 카드(현재/최신 버전, 릴리즈 링크)
      - 시스템 버전 조회 훅 `useSystemVersion` 추가(`GET /api/system/version` 연동).
      - 상태 타입에 `SystemVersionResponse` 추가.
      - i18n 리소스에 `settingsPage.sections.about`, `aboutSettings.*` 키(ko/en) 추가.
      - 구현 파일:
        - `apps/frontend/src/pages/Settings/index.tsx`
        - `apps/frontend/src/pages/Settings/sections/AboutSettings.tsx`
        - `apps/frontend/src/features/status/hooks/useSystemVersion.ts`
        - `apps/frontend/src/features/status/types.ts`
        - `apps/frontend/src/i18n/resources.ts`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.

- **릴리즈 업데이트 체크 1차 구현 (#146, 2026-02-24)**:
    - 백엔드:
      - 빌드 메타데이터 주입 변수 추가(`appVersion`, `appCommit`, `appBuildDate`).
      - GoReleaser ldflags에 버전/커밋/빌드시각 주입 추가.
      - 시스템 API 확장:
        - `GET /api/system/version`
        - `GET /api/system/update-check`
      - GitHub 최신 릴리즈 조회 + semver 비교 + 캐시(TTL) 기반 `UpdateChecker` 추가.
      - 조회 실패 시 `200 + error 필드`로 graceful fallback 처리.
      - 구현 파일:
        - `.goreleaser.yaml`
        - `apps/backend/main.go`
        - `apps/backend/internal/system/handler.go`
        - `apps/backend/internal/system/update_checker.go`
        - `apps/backend/internal/system/handler_test.go`
        - `apps/backend/internal/system/update_checker_test.go`
    - 프론트:
      - 상태 영역 업데이트 체크 훅 추가(`useUpdateCheck`).
      - `ServerStatus` 팝오버에 업데이트 섹션(현재/최신 버전, 업데이트 링크, 확인 시각) 추가.
      - 업데이트 가능 시 헤더 상태 트리거에 `업데이트` 배지 노출.
      - i18n 키 추가(ko/en).
      - 구현 파일:
        - `apps/frontend/src/features/status/hooks/useUpdateCheck.ts`
        - `apps/frontend/src/features/status/types.ts`
        - `apps/frontend/src/components/layout/MainLayout/ServerStatus.tsx`
        - `apps/frontend/src/i18n/resources.ts`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.
      - `cd apps/backend && go test ./...` 통과.
      - 브라우저 실측 스크린샷:
        - `/tmp/cohesion-update-check-status-popover.png`

- **설정 UI 미사용 항목 정리 (2026-02-24)**:
    - 프론트:
      - Settings에서 실사용되지 않는 옵션 제거.
        - `파일` 섹션 제거 (`FileSettings` 삭제, 설정 메뉴/라우팅 정리)
        - `일반 > 캐시 삭제` 제거
        - `외관 > 기본 뷰 모드` 제거
      - `settingsStore`에서 미사용 설정 필드/액션 정리.
        - 제거: `defaultViewMode`, `defaultSortBy`, `defaultSortOrder`, `showHiddenFiles`
        - 제거: `httpPort`, `webdavEnabled`, `webdavPort`, `sftpEnabled`, `sftpPort` 및 관련 setter
      - i18n 리소스에서 제거된 설정 키 정리.
      - 구현 파일:
        - `apps/frontend/src/pages/Settings/index.tsx`
        - `apps/frontend/src/pages/Settings/sections/GeneralSettings.tsx`
        - `apps/frontend/src/pages/Settings/sections/AppearanceSettings.tsx`
        - `apps/frontend/src/pages/Settings/sections/FileSettings.tsx` (삭제)
        - `apps/frontend/src/stores/settingsStore.ts`
        - `apps/frontend/src/i18n/resources.ts`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.

- **파일 익스플로러 입력 모드 분리(레이아웃 vs 상호작용) 적용 (2026-02-24)**:
    - 프론트:
      - `FolderContent`에서 화면 폭 기준 레이아웃 모드와 터치 입력 기준 상호작용 모드를 분리.
      - `layoutMode(desktop/mobile)`는 UI 배치에만 사용하고, `interactionMode(pointer/touch)`는 선택/탭/컨텍스트메뉴/드래그 동작 분기에 사용.
      - 터치 입력 환경(PC 해상도 포함)에서는 모바일 상호작용 규칙(탭 진입/롱프레스 선택/팬 억제 로직)을 적용.
      - 터치 입력 환경에서는 박스선택 및 내부 드래그 이동을 비활성화해 마우스 규칙과의 충돌을 방지.
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.

- **언어 설정(i18n) 실제 반영 4차 (#141, 2026-02-23)**:
    - 프론트:
      - 설정 상세 섹션 하드코딩 문구를 번역 키 기반으로 전환.
        - `ProfileSettings`, `AppearanceSettings`, `FileSettings`
        - `ServerSettings`, `SpaceSettings`
        - `PermissionSettings`, `AccountSettings`
      - API/store/search fallback 메시지를 i18n 키 기반으로 전환.
        - `api/auth.ts`, `api/setup.ts`, `api/config.ts`
        - `browseStore.ts`, `spaceStore.ts`
        - `searchApi.ts`, `useSearchExplorerSource.ts`
      - 탐색기 업로드 오버레이 텍스트(`파일을 놓아 업로드`)를 `folderContent.dropToUpload` 키로 전환.
      - `resources.ts`에 설정/API/store/search 관련 네임스페이스 및 키를 확장하고 `dropToUpload` 키를 추가.
      - 구현 파일:
        - `apps/frontend/src/i18n/resources.ts`
        - `apps/frontend/src/pages/Settings/sections/ProfileSettings.tsx`
        - `apps/frontend/src/pages/Settings/sections/AppearanceSettings.tsx`
        - `apps/frontend/src/pages/Settings/sections/FileSettings.tsx`
        - `apps/frontend/src/pages/Settings/sections/ServerSettings.tsx`
        - `apps/frontend/src/pages/Settings/sections/SpaceSettings.tsx`
        - `apps/frontend/src/pages/Settings/sections/PermissionSettings.tsx`
        - `apps/frontend/src/pages/Settings/sections/AccountSettings.tsx`
        - `apps/frontend/src/api/auth.ts`
        - `apps/frontend/src/api/setup.ts`
        - `apps/frontend/src/api/config.ts`
        - `apps/frontend/src/stores/browseStore.ts`
        - `apps/frontend/src/stores/spaceStore.ts`
        - `apps/frontend/src/features/search/api/searchApi.ts`
        - `apps/frontend/src/features/search/hooks/useSearchExplorerSource.ts`
        - `apps/frontend/src/features/browse/components/FolderContent/UploadOverlay.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.
      - 브라우저 실측(EN 전환) 스크린샷:
        - `/tmp/cohesion-i18n-settings4-en.png`

- **언어 설정(i18n) 실제 반영 3차 (#141, 2026-02-23)**:
    - 프론트:
      - 훅/연산 레이어의 사용자 노출 메시지 하드코딩 제거.
      - `useFileOperations`의 충돌 모달/업로드/다운로드/이동·복사/휴지통 액션 메시지들을 번역 키 기반으로 전환.
      - `useDragAndDrop` 이동 확인 모달 문구를 번역 키 기반으로 전환.
      - `useBrowseApi` 기본 에러 fallback 메시지를 번역 키 기반으로 전환.
      - `constants.tsx`의 테이블 컬럼 라벨을 `browseTable` 키 기반(옵션 translator)으로 전환.
      - `resources.ts`에 `fileOperations`, `dragAndDrop`, `browseApi`, `browseTable` 네임스페이스 추가.
      - 구현 파일:
        - `apps/frontend/src/i18n/resources.ts`
        - `apps/frontend/src/features/browse/hooks/useFileOperations.tsx`
        - `apps/frontend/src/features/browse/hooks/useDragAndDrop.ts`
        - `apps/frontend/src/features/browse/hooks/useBrowseApi.ts`
        - `apps/frontend/src/features/browse/constants.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.

- **언어 설정(i18n) 실제 반영 2차 (#141, 2026-02-23)**:
    - 프론트:
      - 번역 범위를 로그인/탐색기/휴지통 화면으로 확장.
      - `FolderContent`의 검색/빈상태/에러/선택바/휴지통 확인 모달 문구를 번역 키로 전환.
      - `FolderTree`의 에러/재시도/스페이스 선택 안내/우클릭 삭제 라벨을 번역 키로 전환.
      - `FolderContentTable`, `FolderContentGrid`의 빈 상태/더보기/액션 메뉴 라벨을 번역 키로 전환.
      - `TrashExplorer` 전체 문구(확인 모달, 충돌정책, 결과 요약, 컬럼/버튼/빈상태)를 번역 키로 전환.
      - `resources.ts`에 `trashExplorer` 네임스페이스 및 관련 키를 추가.
      - 구현 파일:
        - `apps/frontend/src/i18n/resources.ts`
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
        - `apps/frontend/src/features/browse/components/FolderTree.tsx`
        - `apps/frontend/src/features/browse/components/TrashExplorer.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent/FolderContentTable.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent/FolderContentGrid.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.
      - 브라우저 실측(영문 전환 후 확인) 스크린샷:
        - `/tmp/cohesion-i18n-expand-trash-en.png`
        - `/tmp/cohesion-i18n-expand-search-en.png`

- **언어 설정(i18n) 실제 반영 1차 (#141, 2026-02-23)**:
    - 프론트:
      - `i18next`, `react-i18next` 도입 및 번역 리소스/초기화 파일 추가.
      - `RootProviders`에서 설정 언어(`ko|en`)를 `i18n.changeLanguage`와 `antd ConfigProvider locale`(`ko_KR`/`en_US`)에 연동.
      - 설정 > 일반의 언어 선택 UI를 번역 키 기반으로 전환하고, 변경 시 즉시 반영되도록 구성.
      - 핵심 공통 영역 번역 키 적용:
        - 메인 헤더 검색/버튼 라벨
        - 사이드패널 스페이스/휴지통/스페이스 삭제 모달
        - Status 팝오버(호스트/프로토콜/상태 라벨)
        - 설정 페이지 사이드 메뉴/헤더 라벨
      - 구현 파일:
        - `apps/frontend/src/i18n/index.ts`
        - `apps/frontend/src/i18n/resources.ts`
        - `apps/frontend/src/RootProviders.tsx`
        - `apps/frontend/src/components/layout/MainLayout/index.tsx`
        - `apps/frontend/src/components/layout/MainLayout/MainSider.tsx`
        - `apps/frontend/src/components/layout/MainLayout/ServerStatus.tsx`
        - `apps/frontend/src/pages/Settings/index.tsx`
        - `apps/frontend/src/pages/Settings/sections/GeneralSettings.tsx`
        - `apps/frontend/package.json`
        - `pnpm-lock.yaml`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - 브라우저 실측:
        - 언어 변경 즉시 UI 전환 확인(ko↔en)
        - 새로고침 후 선택 언어 유지 확인
      - 스크린샷:
        - `/tmp/cohesion-i18n-main-en.png`
        - `/tmp/cohesion-i18n-settings-ko.png`

- **프론트 lint 경고(`baseline-browser-mapping`) 제거 (2026-02-23)**:
    - 프론트:
      - `apps/frontend`에 `baseline-browser-mapping@^2.10.0`를 devDependency로 명시 추가.
      - 구현 파일:
        - `apps/frontend/package.json`
        - `pnpm-lock.yaml`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과 (기존 baseline 경고 제거 확인).
      - `pnpm -C apps/frontend typecheck` 통과.

- **메인 헤더 브랜드 링크 및 서버 설정 유효성 검사 강화 (#139, 2026-02-23)**:
    - 프론트:
      - `MainLayout` 헤더의 `Cohesion` 브랜드 클릭 시 메인(`/`)으로 이동하도록 링크 동작 추가.
      - `ServerSettings`에 저장/재시작 전 유효성 검사 추가:
        - WEB 포트 범위(1~65535) 검사
        - SFTP 활성화 시 SFTP 포트 범위(1~65535) 검사
        - WEB/SFTP 포트 충돌 검사
      - 유효하지 않은 설정일 때 에러 Alert 노출 및 저장/재시작 버튼 비활성화.
      - 구현 파일:
        - `apps/frontend/src/components/layout/MainLayout/index.tsx`
        - `apps/frontend/src/pages/Settings/sections/ServerSettings.tsx`
        - `apps/frontend/src/api/config.ts`
    - 백엔드:
      - `/api/config` 업데이트 시 서버 설정 유효성 검증 추가:
        - `server.port` 필수/정수/범위 검사
        - `sftpEnabled=true`일 때 `server.sftpPort` 범위 및 포트 충돌 검사
      - 구현 파일:
        - `apps/backend/internal/config/handler.go`
      - 테스트 추가:
        - `apps/backend/internal/config/handler_test.go`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `cd apps/backend && go test ./...` 통과.
      - 브라우저 실측 스크린샷:
        - `/tmp/cohesion-main-brand-search-page.png`
        - `/tmp/cohesion-settings-config-validation.png`

- **README 릴리즈 산출물 가이드 보강 (2026-02-23)**:
    - 문서:
      - `Supported OS / Architecture (Release Artifacts)` 섹션 추가.
      - GitHub Releases 링크 및 산출물 실행 방법(macOS/Linux, Windows) 추가.
      - 첫 실행 시 기본 설정/DB 경로 관련 안내와 업그레이드 시 주의사항(설정/데이터 디렉토리 유지) 추가.
      - 구현 파일:
        - `README.md`

- **프론트 타입체크 명령/CI 검증 경로 정합화 (2026-02-23)**:
    - 프론트:
      - `apps/frontend/package.json`에 `typecheck` 스크립트(`tsc -b --pretty false`) 추가.
      - 루트 `package.json`에 `typecheck` 스크립트(`pnpm -C apps/frontend typecheck`) 추가.
      - `TrashModal`, `TrashExplorer`, `SpaceSettings`의 `implicit any` 및 아이콘 prop 타입 불일치 수정.
    - CI:
      - `.github/workflows/ci.yml`의 `Run lint` 다음에 `Run typecheck` 단계 추가.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend typecheck` 통과.
      - `pnpm typecheck` 통과.
      - `pnpm -C apps/frontend build` 통과.

- **사이드패널 휴지통 진입점 스타일 통합 (2026-02-23)**:
    - 프론트:
      - `SidePanelShell` footer 버튼 방식을 제거하고, 스페이스 트리 하단에 트리 스타일의 `휴지통` 항목을 배치.
      - `휴지통` 항목을 하단 고정하지 않고 스페이스 트리 바로 아래 동일 스크롤 문맥으로 배치.
      - `휴지통` 항목 위 구분선을 제거하고, 트리 switcher placeholder를 숨겨 아이콘 왼쪽 여백을 제거.
      - `folder-tree` 공통 switcher 스타일이 휴지통 액션 트리에도 적용되던 우선순위 충돌을 해소하기 위해, 공통 규칙을 `.layout-sider-tree-action`에서 제외.
      - 휴지통 아이콘을 `DeleteOutlined`에서 `material-symbols-rounded(delete)`로 교체해 스페이스 트리 아이콘 계열과 통일.
      - 휴지통 라벨(`inline-flex`) baseline 정렬로 행 높이가 29px로 커지던 문제를 `line-height: 24px` + `vertical-align: top`으로 보정해 스페이스 항목(24px)과 통일.
      - 휴지통 라벨 래퍼의 x축 시작점을 `margin-left: -8px`, `gap: 12px`으로 보정해 스페이스 트리와 아이콘/텍스트 시작 칼럼을 일치.
      - 휴지통 화면(`/trash`) 및 휴지통 모달 footer의 수동 `새로고침` 버튼을 제거(자동 갱신 경로만 유지).
      - 구현 파일:
        - `apps/frontend/src/components/layout/MainLayout/MainSider.tsx`
        - `apps/frontend/src/assets/css/global.css`
        - `apps/frontend/src/features/browse/components/TrashExplorer.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent/TrashModal.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과.
      - 브라우저 실측 스크린샷:
        - `/tmp/cohesion-tree-trash-below-spaces-desktop.png`
        - `/tmp/cohesion-tree-trash-below-spaces-mobile.png`
        - `/tmp/cohesion-tree-trash-no-divider-desktop.png`
        - `/tmp/cohesion-tree-trash-no-divider-mobile.png`
        - `/tmp/cohesion-trash-switcher-gap-fix.png`
        - `/tmp/cohesion-trash-material-icon.png`
        - `/tmp/cohesion-trash-row-align-fix.png`
        - `/tmp/cohesion-trash-startpoint-align-fix.png`
        - `/tmp/cohesion-trash-no-refresh-button.png`

- **이동/복사 대상 모달 Space 루트 선택 허용 보정 (2026-02-23)**:
    - 프론트:
      - 대상 선택 모달이 Space 루트(`''`)를 미선택으로 오판하던 검증 로직을 수정.
      - 루트 선택 시에도 `선택된 경로` 표시가 보이도록 UI 조건 보정.
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/DestinationPickerModal.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과.

- **Space 쿼터/사용량 대시보드 구현 완료 (#125, 2026-02-22)**:
    - 백엔드:
      - `space` 스키마에 `quota_bytes` 컬럼 추가 및 기존 DB 자동 마이그레이션(`ALTER TABLE`) 적용.
      - 사용량 집계 서비스(`QuotaService`) 추가:
        - Space 경로 재귀 스캔 기반 사용량 계산
        - 짧은 TTL 캐시 + write 성공 시 invalidate
      - API 추가:
        - `GET /api/spaces/usage` (접근 가능한 Space별 `used/quota/over/scannedAt`)
        - `PATCH /api/spaces/{id}/quota` (Space 쿼터 설정/해제)
      - 쓰기 경로 쿼터 가드 추가(목적지 Space 기준):
        - 폴더 생성, 업로드, 이동, 복사
        - 초과 시 `507 Insufficient Storage` 또는 항목 실패코드 `quota_exceeded` 반환
      - 휴지통 복원/영구삭제/비우기 후 사용량 캐시 invalidate 연동.
      - 구현 파일:
        - `apps/backend/internal/platform/database/queries/schema.sql`
        - `apps/backend/internal/platform/database/migrate.go`
        - `apps/backend/internal/space/space.go`
        - `apps/backend/internal/space/service.go`
        - `apps/backend/internal/space/store/space_store.go`
        - `apps/backend/internal/space/quota_service.go`
        - `apps/backend/internal/space/handler/space_handler.go`
        - `apps/backend/internal/space/handler/space_quota_handler.go`
        - `apps/backend/internal/space/handler/file_handler.go`
        - `apps/backend/internal/auth/permissions.go`
    - 프론트:
      - Settings에 `스페이스` 전용 섹션을 추가하고, `Space 쿼터/사용량` UI를 서버 섹션에서 분리.
      - 접근 권한을 `space.read|space.write` 기준으로 분리하고, 쿼터 수정 컨트롤은 `space.write`에서만 활성화.
      - 쿼터 입력 단위를 `GB`에서 `MB`로 전환.
      - Space별 사용량/쿼터/사용률(Progress) 표시, 인라인 쿼터 저장 및 무제한 설정 지원.
      - 파일 작업 에러 파서가 `error` 필드도 읽도록 보강해 쿼터 초과 메시지 노출 정합화.
      - 구현 파일:
        - `apps/frontend/src/pages/Settings/index.tsx`
        - `apps/frontend/src/pages/Settings/sections/SpaceSettings.tsx`
        - `apps/frontend/src/pages/Settings/sections/ServerSettings.tsx`
        - `apps/frontend/src/features/browse/hooks/useFileOperations.tsx`
        - `apps/frontend/src/features/space/types.ts`
    - 테스트:
      - 백엔드: 업로드/복사 쿼터 초과 테스트 추가
        - `apps/backend/internal/space/handler/file_handler_quota_test.go`
      - 권한 매핑 테스트 추가:
        - `/api/spaces/usage`, `/api/spaces/{id}/quota`
        - `apps/backend/internal/auth/permissions_test.go`
    - 검증:
      - `cd apps/backend && go test ./...` 통과.
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과.
      - 브라우저 실측 스크린샷:
        - `/tmp/cohesion-space-quota-dashboard.png`

- **휴지통 진입 UI/범위 재구성 (2026-02-22)**:
    - 프론트:
      - 스페이스 트리 내부 휴지통 노드를 제거하고, 사이드패널 최하단 고정 `휴지통` 버튼으로 진입점을 이동.
      - `/trash` 화면을 단일 Space 기준에서 `연결된 전체 Space` 통합 조회/처리 구조로 전환.
        - 조회: 각 Space의 `/files/trash`를 병렬 호출 후 병합 정렬.
        - 액션: 선택 항목을 Space별로 그룹화해 `복원/영구삭제` 호출, `비우기`는 모든 Space 대상으로 실행.
      - 휴지통 화면 상단 `탐색기로` 버튼 제거(휴지통 작업 집중형 툴바로 단순화).
      - `/trash` 진입 시 스페이스 트리 선택 상태는 비워 UI 충돌(선택된 Space vs 전역 휴지통)을 제거.
    - 구현 파일:
      - `apps/frontend/src/components/layout/MainLayout/MainSider.tsx`
      - `apps/frontend/src/components/common/SidePanelShell.tsx`
      - `apps/frontend/src/features/browse/components/FolderTree.tsx`
      - `apps/frontend/src/features/browse/components/TrashExplorer.tsx`
      - `apps/frontend/src/assets/css/global.css`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과.
      - 브라우저 실측 스크린샷:
        - `/tmp/cohesion-trash-footer-global.png`

- **휴지통 내부 경로 우회 접근 차단 보강 (2026-02-22)**:
    - 백엔드:
      - 일반 파일/브라우즈 경로에서 예약 디렉토리 `.cohesion_trash` 접근을 차단하는 가드 추가.
      - 적용 범위:
        - browse 경로(`handleSpaceBrowse`)
        - 다운로드/다운로드 티켓
        - 이름변경/폴더생성/업로드
        - 이동/복사(source/destination)
        - 다중 다운로드/티켓
      - 구현 파일:
        - `apps/backend/internal/space/handler/file_handler.go`
        - `apps/backend/internal/space/handler/space_handler.go`
      - 테스트 추가:
        - `TestTrash_InternalTrashPathIsBlockedFromRegularBrowseAndDownload`
        - 파일: `apps/backend/internal/space/handler/file_handler_trash_test.go`
    - 검증:
      - `cd apps/backend && go test ./...` 통과.

- **파일 삭제 문구 정합화 (2026-02-22)**:
    - 프론트 파일 작업 UI에서 `삭제` 문구를 실제 동작에 맞게 `휴지통 이동`으로 보정.
    - 변경 범위:
      - 삭제 확인 모달 제목/본문/확인 버튼 문구
      - 선택 툴바/컨텍스트 메뉴/행 액션 메뉴의 삭제 라벨
      - 삭제 실패 fallback 문구(`휴지통 이동 실패`)
    - 구현 파일:
      - `apps/frontend/src/features/browse/hooks/useFileOperations.tsx`
      - `apps/frontend/src/features/browse/constants.tsx`
      - `apps/frontend/src/features/browse/components/FolderContent.tsx`
      - `apps/frontend/src/features/browse/components/FolderContent/FolderContentTable.tsx`
      - `apps/frontend/src/features/browse/components/FolderContent/FolderContentSelectionBar.tsx`

- **휴지통(Soft Delete) + 복원 기능 구현 완료 (#123, 2026-02-22)**:
    - 백엔드:
      - 삭제 API를 즉시 영구삭제에서 휴지통 이동으로 전환.
        - `handleFileDelete`, `handleFileDeleteMultiple` -> soft delete 처리
      - 휴지통 API 추가:
        - `GET /api/spaces/{id}/files/trash`
        - `POST /api/spaces/{id}/files/trash-restore`
        - `POST /api/spaces/{id}/files/trash-delete`
        - `POST /api/spaces/{id}/files/trash-empty`
      - `trash_items` 스키마/스토어/서비스 도입.
      - 구현 파일:
        - `apps/backend/internal/platform/database/queries/schema.sql`
        - `apps/backend/internal/space/trash.go`
        - `apps/backend/internal/space/trash_service.go`
        - `apps/backend/internal/space/store/trash_store.go`
        - `apps/backend/internal/space/handler/file_handler.go`
        - `apps/backend/internal/space/handler/space_handler.go`
        - `apps/backend/main.go`
      - 테스트 추가:
        - `apps/backend/internal/space/handler/file_handler_trash_test.go`
    - 프론트:
      - 파일 삭제 메시지를 `휴지통 이동` 의미로 변경.
      - 툴바에 휴지통 진입 버튼 추가.
      - 휴지통 모달(조회/복원/영구삭제/비우기) 추가.
      - 복원 충돌 시 정책 선택(`overwrite|rename|skip`) UX 추가.
      - 구현 파일:
        - `apps/frontend/src/features/browse/hooks/useFileOperations.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent/FolderContentToolbar.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent/TrashModal.tsx`
    - 검증:
      - `cd apps/backend && go test ./...` 통과.
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과.

- **복사/이동 충돌 정책 2차 확장 완료 (2026-02-22)**:
    - 백엔드:
      - `move/copy` API에 `conflictPolicy`(`overwrite|rename|skip`) 파라미터를 추가.
      - 충돌 실패 항목에 `code`(`destination_exists` 등)를 포함해 프론트가 문자열 파싱 없이 충돌 타입을 식별하도록 보강.
      - `skip` 결과를 `skipped` 배열로 반환하고, `overwrite`/`rename` 처리 시 `succeeded/failed/skipped` 집계를 일관화.
      - 구현 파일:
        - `apps/backend/internal/space/handler/file_handler.go`
      - 테스트 추가:
        - `apps/backend/internal/space/handler/file_handler_move_copy_conflict_test.go`
    - 프론트:
      - 이동/복사 실행을 `충돌 감지 -> 사용자 정책 선택 -> 재시도` 흐름으로 확장.
      - 첫 충돌에서 `덮어쓰기/이름 변경/건너뛰기` 선택 모달을 표시하고, `남은 충돌 항목 동일 적용` 옵션 제공.
      - 이동/복사 결과를 `성공/건너뜀/실패` 요약으로 표기.
      - 구현 파일:
        - `apps/frontend/src/features/browse/hooks/useFileOperations.tsx`
    - UI 보정:
      - 이동/복사 대상 모달 기본 선택 경로를 현재 경로(`currentPath/currentSpace`)로 초기화.
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/DestinationPickerModal.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
    - 검증:
      - `cd apps/backend && go test ./...` 통과.
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과.
      - 브라우저 실측:
        - 첫 요청(`conflictPolicy` 없음)에서 충돌 감지 후 정책 모달 표시 확인.
        - 정책 적용 재요청(`conflictPolicy=overwrite`)으로 복사/이동 모두 충돌 해결 확인.
    - 후속 안정화:
      - `copy`에서 동일 경로(`source == destination`)에 `overwrite` 정책이 들어와도 원본이 삭제되지 않도록 `same_destination` 가드 추가.
      - `move/copy overwrite`를 `RemoveAll -> write` 방식에서 `backup/swap` 기반 non-destructive 처리로 전환해 실패 시 기존 대상을 복구하도록 보강.
      - 이동/복사 결과에서 `성공 0건 + 실패>0건`인 경우에도 목록 새로고침/트리 invalidate를 수행해 UI stale 상태를 방지.
      - 충돌 모달에서 사용자가 `중단`을 선택하면 남은 미처리 충돌 항목 수를 `실패` 집계에 반영하도록 보정.
      - 검증:
        - `TestHandleFileCopy_SameDestinationWithOverwriteDoesNotDeleteSource` 추가 및 통과.
        - `TestMoveWithDestinationSwap_RestoresDestinationWhenMoveFails` 추가 및 통과.
        - `cd apps/backend && go test ./internal/space/handler` 통과.
        - `pnpm -C apps/frontend lint` 통과.
        - `pnpm -C apps/frontend exec tsc --noEmit` 통과.

- **업로드 충돌 정책(#124) 구현 완료 (2026-02-22)**:
    - 백엔드:
      - `handleFileUpload`에 `conflictPolicy`(`overwrite|rename|skip`) 파라미터를 추가하고, 기존 `overwrite=true`는 하위호환으로 유지.
      - 정책 미지정 충돌은 기존처럼 `409`를 유지하고, `rename`은 `파일명 (n).확장자` 규칙으로 서버에서 충돌 없는 경로를 자동 결정.
      - `skip`은 파일 미작성으로 처리하고 응답 `status`(`uploaded|skipped`)를 반환해 프론트 집계 근거를 제공.
      - 구현 파일:
        - `apps/backend/internal/space/handler/file_handler.go`
      - 테스트 추가:
        - `apps/backend/internal/space/handler/file_handler_upload_test.go`
    - 프론트:
      - 업로드 훅을 단일 파일에서 다중 파일 입력으로 확장하고, 첫 충돌 시 `덮어쓰기/이름 변경/건너뛰기` 정책 모달을 표시.
      - 사용자가 선택한 정책을 동일 배치의 후속 충돌 파일에 재사용하고, 종료 시 `성공/건너뜀/실패` 요약 토스트를 표시.
      - 드래그앤드롭/파일 선택 업로드 모두 다중 파일 입력을 지원하도록 연동.
      - 구현 파일:
        - `apps/frontend/src/features/browse/hooks/useFileOperations.tsx`
        - `apps/frontend/src/features/browse/hooks/useDragAndDrop.ts`
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
    - 검증:
      - `cd apps/backend && go test ./...` 통과.
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과.
      - UI 실측 스크린샷:
        - `/tmp/cohesion-upload-conflict-policy-modal.png`
        - `/tmp/cohesion-upload-conflict-summary.png`

- **검색 모드 그리드/테이블 전환 재개 (2026-02-22)**:
    - 프론트:
      - `FolderContent`의 검색 모드 강제 table 고정을 해제해 `/search`에서도 뷰 토글(`table/grid`)이 동작하도록 복원.
      - 검색 모드의 읽기 전용 가드(쓰기 액션/컨텍스트 메뉴/드래그 비활성)는 기존대로 유지.
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`

- **불필요 변경 정리 (2026-02-22)**:
    - 프론트:
      - `FolderContent`에서 검색 모드 강제 table 정책과 충돌하던 dead code(미도달 grid truncation 분기)를 제거.
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
    - 범위 정리:
      - 백엔드 검색 최적화 변경(`account/service.go`, `search_handler.go`, `search_handler_test.go`)은 이번 정리 변경셋에서 제외(분리) 처리.

- **검색 전환 체감 성능 개선 3차 적용 완료 (#128, 2026-02-22)**:
    - 프론트:
      - 검색 결과 클릭(`/search -> /`) 시 트리 자동 확장을 경로 중심으로 경량화.
        - 선택 노드 자체는 자동 확장에서 제외하고 상위 경로만 확장.
        - 자동 동기화 중 자식 수가 많은 디렉터리(`> 40`)는 선택 경로 하위만 우선 로드해 초기 렌더 노드 수를 억제.
        - 사용자가 해당 노드를 직접 확장하면 전체 자식 목록을 다시 hydrate하도록 처리.
      - `/search` 결과 페이징 limit을 `120 -> 80`으로 조정해 Enter 전환 시 초기 렌더 부하 완화.
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/FolderTree.tsx`
        - `apps/frontend/src/features/search/hooks/useSearchExplorerSource.ts`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 실측(동일 시나리오):
        - 검색 결과 클릭 시 트리 노드 수: `198 -> 38`
        - 검색 결과 클릭 시 최대 long task: `264ms -> 89ms`
        - Enter 전체결과 전환 시 최대 long task: `154ms -> 71ms`

- **검색 복귀 후 트리 누적 상태 정리 적용 완료 (#128, 2026-02-22)**:
    - 프론트:
      - `MainSider`에서 `/search` 여부를 `FolderTree`로 전달(`isSearchMode`)해 검색 모드 전용 트리 정리 트리거를 명시.
      - `FolderTree`에서 검색 모드 진입 시
        - `expandedKeys` 초기화,
        - `loadedKeys` 초기화,
        - 루트 노드 하위 `children` 제거(루트만 유지)
        를 수행해 반복 검색/복귀 시 트리 내부 상태 누적을 줄이도록 보정.
      - `loadChildrenForKey`는 `treeDataRef` 기반 노드 존재 확인을 유지해, 상위 노드가 아직 주입되지 않은 deep key가 성급히 `loaded` 처리되는 문제를 방지.
      - 구현 파일:
        - `apps/frontend/src/components/layout/MainLayout/MainSider.tsx`
        - `apps/frontend/src/features/browse/components/FolderTree.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 실측: `/search?q=md` 기준 검색 결과 클릭 후 `/` 이동 -> `<` 복귀 시 트리 노드가 최종 `3`개(루트만)로 안정화, 확장 누적 미재현 확인

- **검색 반복 시 누적 지연 완화 2차 적용 완료 (#128, 2026-02-22)**:
    - 프론트:
      - 검색 API(`searchFiles`)에 `AbortSignal` 전달 옵션 추가.
      - 헤더 즉시검색에서 새 요청 시작/검색 종료/화면 이탈 시 이전 in-flight 요청을 `abort()` 처리.
      - `/search` 전용 결과 훅(`useSearchExplorerSource`)에서도 쿼리 변경/언마운트 시 이전 요청 취소 처리.
      - `AbortError`는 사용자 에러 메시지로 노출하지 않도록 분기.
      - 구현 파일:
        - `apps/frontend/src/features/search/api/searchApi.ts`
        - `apps/frontend/src/components/layout/MainLayout/index.tsx`
        - `apps/frontend/src/features/search/hooks/useSearchExplorerSource.ts`
    - 백엔드:
      - 검색 핸들러 루프 및 `WalkDir` 내부에 `r.Context()` 취소 체크를 추가해 클라이언트 취소 시 탐색을 조기 중단.
      - 짧은 쿼리(2글자)에서 불필요한 `filepath.Rel` 계산을 피하도록 상대경로 계산 시점을 지연.
      - 구현 파일:
        - `apps/backend/internal/space/handler/search_handler.go`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `cd apps/backend && go test ./...` 통과

- **검색 결과 복귀 UX 통합 완료 (`<` 버튼 흡수, 2026-02-22)**:
    - 프론트:
      - `FolderContent`의 `<` 버튼 동작을 확장:
        - 우선순위 1: 폴더 히스토리 뒤로 이동
        - 우선순위 2: 폴더 히스토리가 없고 `fromSearchQuery`가 있으면 `/search?q=...`로 복귀
      - 결과적으로 검색 결과 진입 후 별도 버튼 없이 기존 뒤로가기 버튼으로 검색 결과 화면으로 복귀 가능.
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 실측: `/search?q=te` -> 결과 클릭(`/`) -> `<` 클릭 시 `/search?q=te` 복귀 확인

- **전역 검색 성능/정확도 개선 1차 완료 (#128, 2026-02-22)**:
    - 백엔드:
      - 검색 권한 필터를 요청당 1회 계산하는 경로를 추가해 Space별 반복 권한 조회(N+1)를 완화.
        - `account.Service.ResolveAccessibleSpaceIDs` 추가
        - `search_handler`에서 optional resolver(type assertion) 우선 사용, 미지원 구현은 기존 per-space fallback 유지
      - 검색 결과 수집 순서를 `Space 순회 중 잔여 limit 차감`에서 `Space별 후보 수집 -> 전역 정렬 -> 상위 limit 절단`으로 전환.
      - 짧은 쿼리(2글자)에서 path contains 매칭을 제한해 노이즈를 줄이고, path segment prefix 가중치를 rank에 반영.
      - 구현 파일:
        - `apps/backend/internal/account/service.go`
        - `apps/backend/internal/space/handler/search_handler.go`
        - `apps/backend/internal/space/handler/search_handler_test.go`
    - 테스트:
      - 추가:
        - `TestHandleSearchFiles_GlobalRankingKeepsLaterSpaceCandidates`
        - `TestHandleSearchFiles_ShortQuerySkipsPathOnlyHits`
        - `TestHandleSearchFiles_UsesBatchAccessResolver`
      - 검증:
        - `cd apps/backend && go test ./...` 통과
    - 프론트:
      - 헤더 즉시검색 디바운스를 `220ms -> 420ms`로 상향해 타이핑 중 API 호출 빈도를 완화.
      - 헤더 드롭다운 즉시결과 API 호출 최소 길이는 `2글자`로 유지.
      - Enter 전체검색(`/search`) 최소 길이 `2글자`는 유지.
      - 구현 파일:
        - `apps/frontend/src/components/layout/MainLayout/index.tsx`
      - 검증:
        - `pnpm -C apps/frontend lint` 통과
        - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **검색 성능/정확도 개선 이슈 등록 완료 (#128, 2026-02-22)**:
    - 이슈: `https://github.com/lteawoo/Cohesion/issues/128`
    - 범위:
      - 권한 필터링 최적화
      - 전역 랭킹/limit 적용 순서 보정
      - 짧은 쿼리 정확도 보정
    - 권장 PR 라벨: `fix`
- **전역 검색(#122) 결과 클릭 시 Space 트리 자동 확장/선택 동기화 보정 완료 (2026-02-22)**:
    - 프론트:
      - `FolderTree`에 `selectedKeys` 기반 상위 경로 자동 확장 로직을 추가.
      - `/search`에서 결과 클릭 후 `/`로 복귀할 때 `selectedPath`/`selectedSpace` 값이 이전과 같아도, `selectedKeys` 변화(`[] -> target`)를 트리거로 확장을 보장.
      - 결과적으로 검색 결과 클릭 시 파일 익스플로러 경로와 좌측 Space 트리 선택/열림 상태를 일치시키도록 보정.
      - 구현 파일:
        - `apps/frontend/src/features/browse/components/FolderTree.tsx`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 실측(모바일 뷰포트): `/search?q=te` 결과 클릭 -> `/` 전환 후 트리에서 대상 폴더 자동 확장/선택 확인
      - 확인 스크린샷: `/tmp/cohesion-search-click-tree-selected.png`
- **전역 검색(#122) 표시 정리: 경로 노출 제거 + 드롭다운 아이콘 통일 (2026-02-22)**:
    - 프론트:
      - 헤더 검색 드롭다운 메타에서 `space · parentPath` 표기를 제거하고 `spaceName`만 노출.
      - 검색 결과 테이블 메타에서 `parentPath`를 제거하고 `size | modTime | spaceName`만 노출.
      - 헤더 검색 드롭다운 파일 아이콘을 `FileOutlined` 단일 아이콘에서 `FileTypeIcon`으로 교체해 테이블 뷰 아이콘 정책과 통일.
      - 드롭다운 아이콘 크기(18px)도 테이블과 맞춰 시각적 차이를 축소.
      - 구현 파일:
        - `apps/frontend/src/components/layout/MainLayout/index.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
        - `apps/frontend/src/assets/css/global.css`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 시각 확인 스크린샷: `/tmp/cohesion-search-dropdown-space-only.png`
- **전역 검색(#122) 모바일 UX 보정: 검색 아이콘 탭 시 헤더 전체 검색 모드 전환 (2026-02-22)**:
    - 프론트:
      - 모바일에서 검색 아이콘 탭 시 헤더의 일반 요소(메뉴/브랜드/상태/설정)를 숨기고 `닫기 + 검색 입력`만 노출하도록 변경.
      - 데스크톱 헤더 검색 UX는 기존 유지, 모바일에서만 전용 검색 헤더 모드 적용.
      - 검색 입력/드롭다운 렌더를 공통 블록으로 정리해 모바일/데스크톱 동작 일관성 유지.
      - 구현 파일:
        - `apps/frontend/src/components/layout/MainLayout/index.tsx`
        - `apps/frontend/src/assets/css/global.css`
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 실측(390px): `검색` 탭 시 헤더에 `검색 닫기 + 검색 입력`만 표시, 닫기 시 기본 헤더 복귀 확인
- **전역 검색(#122) UX 보정: 검색 화면 트리 선택 해제 처리 완료 (2026-02-22)**:
    - 프론트:
      - 검색 결과 전체보기(`/search`) 화면에서 좌측 Space 트리 선택 하이라이트를 비우도록 조정.
      - 트리 노드 클릭 시 기존과 동일하게 browse(`/`)로 복귀하고 해당 Space/경로 선택은 다시 정상 표시.
      - 구현 방식:
        - `FolderTree`에 선택키 주입 prop(`selectedKeys`) 추가.
        - `MainSider`에서 현재 라우트가 `/search`일 때 `selectedKeys=[]` 전달, browse에서는 store 기반 선택키 전달.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 실측: `/search` 트리 selected 0개, 트리 클릭 후 `/`에서 selected 1개 확인
- **전역 검색(#122) 3차 통합 완료: 검색 결과를 `FolderContent` 내부 소스로 흡수 (2026-02-22)**:
    - 프론트:
      - `FileExplorer`를 단일 렌더 구조로 정리하고(`/`, `/search` 공통) 내부 콘텐츠 분기 제거.
      - `FolderContent`가 라우트(`/search`)를 직접 감지해 검색/브라우징 데이터 소스만 전환하도록 변경.
      - 검색 모드에서도 기존 탐색기 골격(상단 툴바, 콘텐츠 영역, 하단 경로바/Breadcrumb)을 동일하게 사용.
      - 검색 전용 상태 처리(쿼리 길이 부족/검색 중/오류/빈 결과)를 `FolderContent`의 공통 상태 분기 안에서 처리.
      - 검색 모드에서는 파일 작업 컨텍스트 메뉴/액션을 비활성화하고, 결과 클릭 시 기존 browse 경로(`setPath` + `/`)로 이동 유지.
      - 트리 클릭 시 `/search` -> `/` 복귀 동선과 함께 기본 파일 익스플로러 목록이 즉시 표시되도록 정합성 확보.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `pnpm -C apps/frontend build` 통과
      - 시각 검증 스크린샷: `/tmp/cohesion-search-foldercontent-unified.png`
- **전역 검색(#122) 2차 구현 완료: API 연동 + 전용 검색 화면 + 헤더 즉시결과 (2026-02-22)**:
    - 백엔드:
      - `GET /api/search/files` 신규 추가 (Space별 읽기 권한 필터 + 재귀 검색 + 숨김 파일/폴더 제외 + `limit` 지원).
      - 라우트 등록: `apps/backend/internal/space/handler/space_handler.go`.
      - 권한 매핑 추가: `apps/backend/internal/auth/permissions.go` (`/api/search/files` -> `file.read`).
      - 테스트 추가:
        - `apps/backend/internal/space/handler/search_handler_test.go` (인증 누락, limit 검증, 권한 필터 검색 결과).
        - `apps/backend/internal/auth/permissions_test.go` (검색 엔드포인트 권한 매핑).
    - 프론트:
      - 헤더 검색 입력을 `선택 Space 한정`에서 `연결된 전체 Space` 대상으로 전환.
      - 타이핑 시 헤더 드롭다운 즉시결과(상위 8개) 표시 및 클릭 시 해당 Space/경로로 이동.
      - Enter 입력 시 전용 검색 화면(`/search?q=...`)으로 이동하도록 연결.
      - 검색 입력 placeholder를 단순 문구 `검색`으로 통일.
      - 라우트 구조 리팩터링:
        - `/search` 라우트도 `SearchPage` 별도 화면 대신 `FileExplorer` 자체를 렌더하도록 통합.
        - `FileExplorer` 내부에서 현재 경로(`browse/search`)에 따라 데이터 소스만 전환하는 구조로 정리.
      - 검색 전용 화면은 `FileExplorer` 내부 모드로 통합 (`/search`에서 동일 익스플로러 컨테이너 사용).
      - 검색 전용 화면 리팩터링:
        - `FolderContentTable`를 옵션 기반으로 확장(`showActions`, `renderMeta`, `emptyText`, `rowKeyResolver`)해 읽기 전용 재사용 가능하게 조정.
        - `SearchResultExplorer` 컴포넌트 추가로 검색 결과 화면이 기존 탐색기 테이블 컴포넌트를 직접 재사용하도록 전환.
        - `useSearchExplorerSource` + `SearchExplorerContent`를 추가해 검색 소스/뷰를 분리하고 `FileExplorer`에서 선택적으로 조립.
      - 검색 API 클라이언트/타입 추가:
        - `apps/frontend/src/features/search/api/searchApi.ts`
        - `apps/frontend/src/features/search/types.ts`
        - `apps/frontend/src/features/search/components/SearchResultExplorer.tsx`
        - `apps/frontend/src/features/search/hooks/useSearchExplorerSource.ts`
        - `apps/frontend/src/features/search/components/SearchExplorerContent.tsx`
      - 라우팅/헤더/CSS 반영:
        - `apps/frontend/src/App.tsx`
        - `apps/frontend/src/components/layout/MainLayout/index.tsx`
        - `apps/frontend/src/assets/css/global.css`
    - 검증:
      - 백엔드: `cd apps/backend && go test ./...` 통과.
      - 프론트: `pnpm -C apps/frontend lint` 통과, `pnpm -C apps/frontend exec tsc --noEmit` 통과.
      - 시각 검증(브라우저 실측 + 스크린샷):
        - `/tmp/cohesion-search-page.png`
        - `/tmp/cohesion-header-search-dropdown-and-page.png`
        - `/tmp/cohesion-search-refactor-reuse-table.png`
        - `/tmp/cohesion-unified-fileexplorer-search-route.png`
- **전역 검색(#122) 헤더 UI 시안 1차 반영 완료 (2026-02-22)**:
    - 프론트:
      - `MainLayout` 헤더 중앙에 검색 입력 UI 추가(데스크톱 상시 노출).
      - 모바일 헤더에 검색 아이콘/토글 입력 UI 추가.
      - Space 미선택 시 검색 입력 비활성화 및 안내 placeholder 적용.
      - 관련 레이아웃/CSS 클래스(`layout-header-center`, `layout-header-search-*`) 추가.
    - 시각 검증:
      - 데스크톱/모바일 실측 확인 (`http://localhost:5173`).
      - 모바일에서 `검색` 버튼 클릭 시 입력창 확장/닫기 동작 확인.
    - 참고:
      - 현재 단계는 UI 시안이며 검색 API 연결은 후속 작업(`#122`)에서 진행.
- **기능 확장 사전 이슈 등록 완료 (2026-02-22)**:
    - GitHub Issue:
      - `#122` 전역 검색(파일명/경로/확장자)
      - `#123` 휴지통(Soft Delete) + 복원
      - `#124` 업로드 충돌 정책(덮어쓰기/이름변경/건너뛰기)
      - `#125` Space 용량/쿼터 + 사용량 대시보드
      - `#126` 감사 로그(Audit Log) 수집/조회
- **백엔드 테스트 최소 세트 확장 완료 (인증/권한 + 서비스 로직, 2026-02-22)**:
    - 백엔드 테스트:
      - `apps/backend/internal/auth/service_test.go` 추가 (로그인/토큰 발급/리프레시 검증).
      - `apps/backend/internal/auth/middleware_test.go` 추가 (퍼블릭 경로, 무토큰 `401`, 권한 부족 `403`, claims 주입 검증).
      - `apps/backend/internal/account/service_permissions_test.go` 추가 (`CanAccessSpaceByID` 권한 계층, `ReplaceUserPermissions` 입력 검증).
      - `apps/backend/internal/auth/test_helpers_test.go` 추가 (SQLite in-memory 공통 테스트 셋업).
    - 검증:
      - `cd apps/backend && go test ./...` 통과.
- **프론트 탐색 상태 처리 일관화 완료 (2026-02-22)**:
    - 프론트:
      - `FolderContent`에서 로딩/에러/빈 상태를 단일 규칙으로 정리 (중앙 로딩, 에러 재시도, 빈 폴더 Empty, 로딩 오버레이).
      - `FolderTree`에서 Space 목록/API 실패 상태를 분리해 오류 메시지 + 재시도 버튼 제공.
      - `useBrowseApi`를 에러 throw 기반으로 정리하고, `browseStore`/`spaceStore` 에러 메시지를 사용자 친화적으로 보강.
      - 공통 API 에러 파서 `apps/frontend/src/api/error.ts` 추가.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과.
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과.
      - `pnpm -C apps/frontend build` 통과.
- **PR CI 기본 파이프라인 추가 완료 (2026-02-22)**:
    - CI:
      - `.github/workflows/ci.yml` 추가.
      - 트리거: `pull_request`, `push(main)`.
      - 순서: `pnpm install --frozen-lockfile` -> `pnpm lint` -> `pnpm build` -> `apps/backend go test ./...`.
      - `concurrency` 및 `timeout-minutes: 20` 적용.
    - 검증:
      - 로컬에서 CI와 동일한 단계(`pnpm lint`, `pnpm build`, `go test ./...`) 통과.
- **v0.1.0 릴리즈 노트 문서 초안 작성 완료** (2026-02-21):
    - 문서:
      - `docs/releases/v0.1.0.md` 신규 추가.
      - 섹션 구성: `Highlights / New Features / Bug Fixes / Maintenance (Chore) / Security / Breaking Changes / Assets / Changelog`.
      - GitHub 업데이트에 바로 활용 가능한 영문 릴리즈 노트 형태로 작성.
- **README 영문화 완료** (2026-02-21):
    - 문서:
      - `README.md` 전 섹션(개요/기능/프로토콜/빌드/환경변수/보안/라이선스)을 영어 문구로 전환.
      - 기존 구조와 명령어는 유지하고 설명 텍스트만 영문화.
- **GoReleaser 릴리즈 노트 생성 방식을 GitHub Native로 전환 완료** (2026-02-21):
    - 배포:
      - `.goreleaser.yaml`의 `changelog`를 `use: github-native`로 변경.
      - 이후 태그 릴리즈부터 `.github/release.yml` 카테고리(`New Features/Bug Fixes/Maintenance/Other`)를 사용해 본문 생성.
    - 검증:
      - `pnpm release:check` 통과 (`.goreleaser.yaml` 유효성 확인)
- **GitHub Actions 태그 기반 자동 릴리즈 워크플로 추가 완료** (2026-02-21):
    - 배포/CI:
      - `.github/workflows/release.yml` 추가 (`push tags: v*`, `workflow_dispatch`).
      - `ubuntu-latest`에서 `Go 1.25.7`, `Node 24`, `pnpm 10.24.0` 환경 구성 후 릴리즈 실행.
      - 순서: `pnpm install` -> `pnpm release:check` -> `apps/backend go test ./...` -> `goreleaser release --clean`.
      - GitHub 릴리즈/아티팩트 업로드를 위해 `permissions.contents: write` 설정.
    - 검증:
      - 로컬 `pnpm release:check` 통과 (`.goreleaser.yaml` 유효성 확인).
- **GitHub Release Notes 카테고리 템플릿 적용 완료** (2026-02-21):
    - 배포/문서:
      - `.github/release.yml` 추가.
      - 릴리즈 노트 자동 분류 카테고리를 `New Features / Bug Fixes / Maintenance (Chore) / Other Changes`로 구성.
      - PR 라벨(`feat|feature|enhancement`, `fix|bug|bugfix`, `chore|dependencies|ci|build|refactor`) 기반 섹션 분류 정책 반영.
- **GoReleaser 배포 대상 OS 확장 완료 (linux 추가)** (2026-02-21):
    - 배포:
      - `.goreleaser.yaml`의 `goos`에 `linux` 추가 (`darwin/linux/windows` 대상).
      - 기존 `goarch`(`amd64`, `arm64`) 조합으로 Linux 아티팩트도 함께 생성되도록 확장.
    - 검증:
      - `pnpm release:check` 통과 (`.goreleaser.yaml` 유효성 확인)
- **cross-space 이동/복사 목적지 Space 권한 검증 보완 완료** (2026-02-21, #117):
    - 백엔드:
      - `handleFileMove`/`handleFileCopy`에서 `destination.spaceId` 기준 `write` 권한 검증을 추가.
      - 공통 헬퍼 `ensureSpacePermission`를 도입해 `claims` 기반 `CanAccessSpaceByID` 검증을 재사용.
      - 권한 부족 시 `403 Forbidden`으로 차단하고, 권한 평가 실패 시 `500`을 반환.
    - 테스트:
      - `file_handler_permission_test.go` 추가 (`401/403/500/성공` 케이스 검증).
    - 검증:
      - `cd apps/backend && go test ./internal/space/handler ./internal/auth` 통과
- **다운로드 티켓 경로 2차 적용 완료 (단일 다운로드 통일)** (2026-02-21):
    - 백엔드:
      - 단일 다운로드 티켓 액션 추가 (`POST /api/spaces/{id}/files/download-ticket`).
      - 단일 파일은 원본 파일 경로를 티켓으로 전달하고, 폴더는 ZIP 임시파일을 생성해 티켓으로 전달.
      - 티켓 모델에 `RemoveAfterUse` 플래그를 추가해 원본 파일 삭제를 방지하고 임시 ZIP만 사용 후 정리.
      - 폴더 ZIP 작성 로직을 `writeFolderToZip`으로 분리해 기존 스트리밍/티켓 경로에서 재사용.
      - 권한 매핑에 `download-ticket`을 `file.read`로 반영.
    - 프론트:
      - 단일 다운로드(`paths.length === 1`)도 티켓 API 호출 후 네이티브 다운로드 URL 실행으로 전환.
      - 결과적으로 단일/다중 모두 `blob` 메모리 적재 경로를 제거.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `cd apps/backend && go test ./...` 통과
- **다중/ZIP 다운로드 티켓 기반 네이티브 경로 1차 도입 완료** (2026-02-21):
    - 백엔드:
      - `download-multiple-ticket` 액션 추가 (`POST /api/spaces/{id}/files/download-multiple-ticket`).
      - 티켓 다운로드 엔드포인트 추가 (`GET /api/downloads/{ticket}`).
      - in-memory 티켓 저장소(만료 TTL, 1회성 소비, 만료 시 임시파일 정리) 도입.
      - ZIP 임시파일 생성 로직을 `buildZipTempArchive`로 분리해 기존 스트리밍/티켓 발급 경로에서 공용 사용.
      - 권한 매핑에 `download-multiple-ticket`, `/api/downloads/`를 `file.read`로 반영.
    - 프론트:
      - 다중 선택 다운로드(`paths.length > 1`)를 티켓 발급 API 호출 후 브라우저 네이티브 다운로드 URL 실행으로 전환.
      - 단일 파일 다운로드 경로(`fetch -> blob`)는 기존 동작 유지.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `cd apps/backend && go test ./...` 통과
- **다중선택 우클릭 메뉴 카운트 표기 정렬 완료** (2026-02-21):
    - 프론트:
      - 데스크톱 다중선택 우클릭 메뉴에서 항목별 `N개` 표기를 제거.
      - 메뉴 상단에 비활성 요약 항목 `N개 선택됨`을 추가해 모바일 선택 UI와 정렬.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **다운로드 완료 토스트 제거 완료** (2026-02-21):
    - 프론트:
      - `handleBulkDownload`의 성공 토스트(`다운로드가 완료되었습니다`, `ZIP 다운로드가 완료되었습니다`)를 제거.
      - 다운로드 실패 토스트는 유지.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **다운로드 진행률 UI 제거 완료** (2026-02-21):
    - 프론트:
      - `useFileOperations`의 다운로드 진행률 상태/스트림 퍼센트 계산 로직 제거.
      - `FolderContent` 우측 하단 다운로드 진행 플로팅 카드 제거.
      - 다운로드는 브라우저 기본 다운로드 UI에 위임하는 방식으로 단순화.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **Status Hosts 주소 클릭 복사 지원 완료** (2026-02-21):
    - 프론트:
      - `ServerStatus`의 `Hosts` 항목을 클릭 가능한 버튼으로 전환.
      - 클릭 시 주소를 클립보드에 복사하고 성공/실패 토스트를 표시.
      - `navigator.clipboard.writeText` 실패 시 `execCommand('copy')` fallback 적용.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **다운로드 진행률 UI 적용 완료** (2026-02-20):
    - 프론트:
      - `useFileOperations` 다운로드 경로를 스트림 기반으로 전환하여 `loaded/total/percent` 상태를 계산.
      - `FolderContent` 진행 UI를 본문 인라인에서 `우측 하단 플로팅 카드`로 전환하고, 경로바 상단에 고정 배치.
      - 플로팅 카드 클릭 시 선택 해제 핸들러와 충돌하지 않도록 이벤트 전파 차단 적용.
      - 플로팅 카드/경로바에서 우클릭 시 빈영역 컨텍스트 메뉴가 열리지 않도록 `contextmenu` 전파/기본동작 차단 적용.
      - 탐색 화면 활성 시(`body.browse-shell-active`) 드롭다운/팝오버/셀렉트 오버레이 텍스트 선택을 차단(`user-select: none`)하도록 보강.
      - 파일 우클릭 메뉴의 단일 다운로드도 동일 진행률 경로를 사용하도록 통일.
    - 백엔드:
      - 단일 파일 다운로드 응답에 `Content-Length` 헤더를 명시.
      - 폴더 ZIP/다중 다운로드 ZIP을 임시 파일 생성 후 전송하도록 변경하고 `Content-Length`를 함께 제공.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `pnpm -C apps/frontend build` 통과
      - `cd apps/backend && go test ./...` 통과
      - 브라우저 실측(네트워크 Slow 3G): 다운로드 진행 바/퍼센트/바이트 표기 확인
- **탐색 앱 쉘 우클릭 정책 적용 완료** (2026-02-20):
    - 프론트:
      - `MainLayout` 루트(`layout-page-browse-shell`)에 `onContextMenuCapture`를 추가해 탐색 화면의 브라우저 기본 우클릭 메뉴를 차단.
      - 커스텀 컨텍스트 메뉴가 있는 지점(파일/폴더/트리/빈 영역)은 기존 이벤트 경로로 그대로 동작.
      - 편집 가능 요소(`input`, `textarea`, `[contenteditable]`, `.allow-native-context-menu`)는 기본 우클릭 허용.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 실측(DevTools 이벤트): 일반 영역 `defaultPrevented=true`, 입력 요소 `defaultPrevented=false`
- **Google Drive 스타일 텍스트 선택 차단(탐색 앱 쉘 범위) 적용 완료** (2026-02-20):
    - 프론트:
      - `MainLayout` 루트에 전용 클래스(`layout-page-browse-shell`)를 부여해 탐색 화면(헤더/트리/파일영역) 범위를 명시.
      - 해당 범위에서 `user-select: none`을 적용해 드래그 중 텍스트 하이라이트 간섭을 차단.
      - 편집 가능 입력 컴포넌트(`input`, `textarea`, `[contenteditable]`)는 `user-select: text`로 예외 처리.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 실측(DevTools): `shell/tree user-select=none`, `input user-select=text` 확인
- **라이선스 AGPL-3.0 적용 완료** (2026-02-20):
    - 문서/정책:
      - 루트 `LICENSE` 파일을 `GNU Affero General Public License v3.0` 전문으로 추가.
      - `README.md` 라이선스 섹션을 `AGPL-3.0-only` 확정 상태로 업데이트.
- **README 2차 정리 완료** (2026-02-20):
    - 문서:
      - 사용자 목표 문구를 `내 PC/서버 파일을 쉽고 단순하게 관리/공유` 중심으로 재정의.
      - `지원 프로토콜` 섹션의 미지원 항목 블록 제거.
      - `프로젝트 구조`, `운영 메모` 섹션 제거.
      - 라이선스 문구를 `확정 전` 상태로 축약하고 별도 의사결정 논의 단계로 전환.
- **README 오픈소스 스타일 개편 완료** (2026-02-20):
    - 문서:
      - 서비스 범위를 실제 구현 기준으로 재정리 (`WEB/WebDAV/SFTP` 명시, `SMB/NFS` 미지원 명시).
      - Quick Start(요구사항/실행/빌드), 환경변수, 보안 권장사항(리버스 프록시 + TLS), 빌드/기여/로드맵 섹션 추가.
      - 사용자 요청 반영: 이모티콘 제거, 릴리즈 섹션을 Build 중심으로 재작성, 설정파일 예시 내용 제거.
      - 라이선스 파일 부재 상태를 README에 명시해 오해 가능성 축소.
- **파일 확장자별 아이콘 썸네일 1차 적용 완료** (2026-02-20):
    - 프론트:
      - 파일 확장자 카테고리 유틸 추가(`pdf/word/excel/ppt/archive/audio/video/code/text/default`).
      - 공통 파일 아이콘 컴포넌트(`FileTypeIcon`) 추가.
      - Folder Grid/Table에서 이미지 외 파일 아이콘을 확장자 기반 아이콘으로 표시하도록 전환.
      - 미분류(unknown) 확장자는 `?` 아이콘 대신 일반 파일 아이콘(`FileOutlined`)으로 표시하도록 정책 조정.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `pnpm -C apps/frontend build` 통과
- **`http_enabled` 설정 필드 제거 완료** (2026-02-20):
    - 백엔드:
      - 설정 모델 `server.http_enabled` 제거.
      - 기본 설정 생성값(`defaultConfigForEnv`)에서 `http_enabled` 제거.
      - 기본 설정 파일(`config.dev.yaml`, `config.prod.yaml`)에서 `http_enabled` 키 제거.
    - 프론트:
      - 설정 API 타입(`ServerConfig`)에서 `httpEnabled` 제거.
      - 서버 설정 UI에서 HTTP 활성화 토글 제거, WEB 포트 설정만 유지.
      - WebDAV 섹션의 `httpEnabled` 의존 조건/비활성화 로직 제거.
      - 설정 스토어에서 `httpEnabled`, `setHttpEnabled` 제거.
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `pnpm -C apps/frontend build` 통과
- **외부 접근 프로토콜 도입 우선순위 분석 및 시크릿 ignore 정리 완료** (2026-02-20):
    - 분석:
      - 현재 동작 프로토콜은 `WEB + WebDAV + SFTP`이며, 외부 노출 기준 우선순위를 `HTTPS 종단(필수) -> SFTP 운영 -> WebDAV HTTPS 한정`으로 정리.
      - `SMB/NFS`는 현재 구현 부재 상태로 확인되어 즉시 도입보다 2차 로드맵(특히 LAN 전용)으로 분류.
    - 설정/보안:
      - 루트 `.gitignore`에 `**/config/secrets/`를 추가해 모노레포 전역 `config/secrets` 하위 런타임 시크릿이 Git 추적되지 않도록 보강.
- **Status 팝오버 섹션 재배치 완료** (2026-02-20):
    - 프론트:
      - `Status` 팝오버를 `Hosts`(상단) → `Protocols`(하단) 순서로 재배치.
      - 기존 `접속 URL` 목록은 `Hosts` 섹션으로 통합.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 팝오버 실측: `Hosts` 헤더가 `Protocols`보다 상단에 렌더됨
- **Status 프로토콜 경로 표기 슬래시 정리 완료** (2026-02-20):
    - 프론트:
      - `Status` 팝오버에서 프로토콜 경로 끝의 `/`를 제거하도록 표기 정규화 적용.
      - `WEB`은 `:포트`만 표시하고, `WebDAV`는 `:포트/dav`로 표시되도록 정리.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 팝오버 실측: `:5176` / `:3000/dav` 확인
- **FTP 기능 완전 제거 완료** (2026-02-20):
    - 백엔드:
      - `internal/ftp` 패키지 및 서버 lifecycle 연동(`main`) 제거.
      - 설정 모델에서 `ftp_enabled`, `ftp_port` 제거.
      - 상태 API(`/api/status`) FTP 항목 제거.
      - 기본 설정 파일(`config.dev.yaml`, `config.prod.yaml`)의 FTP 키 제거.
    - 프론트:
      - 서버 설정 화면에서 FTP 카드 제거.
      - 상태 팝오버 프로토콜 목록에서 FTP 제거.
      - 설정 API 타입 및 계정관리 보조문구에서 FTP 참조 제거.
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `pnpm -C apps/frontend build` 통과
- **Status 프로토콜 표시 순서 고정 완료** (2026-02-19):
    - 프론트:
      - `ServerStatus`의 `protocols` 렌더 순서를 `WEB -> WebDAV -> SFTP`로 고정.
      - 정의되지 않은 신규 프로토콜 키는 기존처럼 후순위에 표시되도록 유지.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **데스크톱 휠 스크롤 경로 재분석 및 보정 완료** (2026-02-20):
    - 원인:
      - `FolderContent` 구조상 상단 툴바/하단 경로바가 스크롤 컨테이너(`selectionContainer`)와 형제 레이어라, 해당 영역에서 발생한 wheel이 리스트 스크롤에 자연 전달되지 않음.
    - 조치:
      - `FolderContent` 루트에 `onWheelCapture`를 추가해 데스크톱 wheel 입력을 단일 경로로 정규화 처리.
      - 리스트 컨테이너를 직접 스크롤하고, 외부 dropdown/modal/bottom-sheet 및 별도 스크롤 영역은 예외 처리.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `pnpm -C apps/frontend build` 통과
- **SFTP 서버 1차 확장 및 릴리즈 실행 검증 완료** (2026-02-19):
    - 백엔드:
      - `internal/sftp` 모듈 신설 (`gliderlabs/ssh`, `pkg/sftp`).
      - 계정 인증(`account.Authenticate`) 및 Space 권한(`read/write`) 기반 파일 접근 제어 연동.
      - 서버 lifecycle(`main`)에 SFTP start/stop 연동, 상태 API(`/api/status`)에 `sftp` 헬스체크 추가.
      - SFTP host key 자동 생성/재사용 정책 적용 (`COHESION_SFTP_HOST_KEY_FILE` override 지원).
      - 기본 SFTP 포트를 `2222`로 통일 (`default config`, `config.dev.yaml`, `config.prod.yaml`).
    - 프론트:
      - 서버 상태 팝오버에 `SFTP` 라벨 추가.
      - Settings의 SFTP 섹션 `(구현 예정)` 문구 제거.
    - 검증:
      - `cd apps/backend && go test ./...` 통과.
      - `pnpm -C apps/frontend build` 통과.
      - `pnpm build` 통과.
      - `pnpm release:snapshot` 후 산출물 실행 시 `config.prod.yaml` 자동 생성 확인
        (`dist/release/backend_darwin_arm64_v8.0/config/config.prod.yaml`).
- **초기 관리자 보안 부팅 전환 완료** (2026-02-19):
    - 백엔드:
      - 기본 관리자 fallback(`admin/admin1234`) 제거.
      - 관리자 계정이 없으면 로그인 대신 초기 설정이 필요하도록 전환(`428 Precondition Required`).
      - 최초 실행 공개 API 추가:
        - `GET /api/setup/status`
        - `POST /api/setup/admin`
      - 운영자가 `COHESION_ADMIN_USER`, `COHESION_ADMIN_PASSWORD`를 함께 주입하면 1회 초기 부팅 계정 생성 가능.
    - 프론트:
      - 로그인 화면이 setup 상태를 감지해 초기 관리자 생성 폼으로 전환.
- **JWT/로컬 DB 시크릿 하드닝 완료** (2026-02-19):
    - 백엔드:
      - `COHESION_JWT_SECRET` 미지정 시 랜덤 JWT 시크릿을 자동 생성해 파일에 저장(`0600`).
      - 시크릿 디렉토리 권한을 owner-only(`0700`)로 강제.
      - SQLite 데이터 파일 디렉토리/파일 권한을 owner-only(`0700`/`0600`)로 강제.
- **설정 파일 탐색을 실행파일 기준으로 보강 완료** (2026-02-19):
    - 백엔드:
      - `SetConfig`가 `config`를 CWD만 보지 않고 실행파일 기준 경로(`exe/config`, `exe/../config`)를 우선 탐색하도록 변경.
      - 설정 파일이 없으면 실행파일 기준 경로에 기본 `config.dev/prod.yaml`을 자동 생성하도록 보강.
      - 개발/직접 실행 호환을 위해 `cwd/config` fallback 유지.
      - 설정 재로딩 시 `viper.Reset()` 적용으로 탐색 경로 중복/누적 방지.
- **GoReleaser 멀티플랫폼 릴리즈 파이프라인 도입 완료** (2026-02-19):
    - 백엔드/배포:
      - 루트 `.goreleaser.yaml` 추가 (darwin amd64/arm64, windows amd64 빌드 + archive/checksum).
      - GoReleaser `before` hook에서 프론트 빌드(`pnpm -C apps/frontend build`) 및 웹 에셋 복사 스크립트 실행.
      - `apps/backend/scripts/prepare-web-dist.js` 추가 및 `apps/backend/build.js`에서 동일 스크립트 재사용.
      - 루트 스크립트 `release:check`, `release:snapshot` 추가.
    - 문서:
      - `README.md`에 GoReleaser 사용법 추가.
- **실행 문서 환경변수 섹션 정합화 완료** (2026-02-19):
    - 문서:
      - `AGENTS.md`, `GEMINI.md`, `CLAUDE.md`의 환경변수 안내를 실제 코드 동작 기준으로 수정.
      - `ENV`, `DB_PATH`, `PORT` 사용 안내 제거.
      - `COHESION_JWT_SECRET`, `COHESION_ADMIN_*` 및 DB 경로(`config.dev/prod.yaml`의 `database.url`) 기준으로 정리.
- **프론트 lint 하드닝 완료 (`react-hooks/set-state-in-effect`, `react-hooks/refs`)** (2026-02-19):
    - 프론트:
      - `BottomSheet`에서 effect 본문의 동기 `setState`를 `requestAnimationFrame` 기반 반영으로 전환.
      - 시트 높이 계산 로직을 `recalculateSheetLayout` 콜백으로 정리하고 effect/observer/resize에서 공통 사용.
      - `FolderContent`에서 렌더 중 `ref.current` DOM 측정 코드를 제거.
      - 오버레이 오프셋 계산을 `useLayoutEffect + ResizeObserver + scroll/resize listener`로 이동.
      - 내비게이션 히스토리 effect의 동기 `setNavigationState`를 프레임 스케줄 방식으로 전환.
    - 검증:
      - `pnpm -C apps/frontend lint` 통과 (경고: baseline-browser-mapping 데이터 갱신 안내 1건)
      - `pnpm -C apps/frontend build` 통과
- **보안 하드닝 1차 적용 완료 (#95)** (2026-02-19):
    - 백엔드:
      - WebDAV 경로(`/dav/`)에 Basic Auth 인증을 강제하고, Space 접근 시 사용자별 권한(`read`/`write`) 체크를 적용.
      - WebDAV 루트 목록을 사용자 접근 가능한 Space만 노출하도록 제한.
      - `webdav_enabled` 설정이 실제 라우트 등록/상태값에 반영되도록 보정.
      - `/api/config` 응답을 `server` 섹션만 반환하도록 축소(민감정보 비노출).
      - 설정 업데이트 API는 `server`만 갱신하도록 변경.
      - 기본 관리자 fallback 제거 + 최초 실행 설정 플로우 도입(`COHESION_ADMIN_*`는 선택적 초기 부팅 수단으로 유지).
      - 계정/Role/Space 일부 API의 `err.Error()` 직접 노출 제거(일반화된 메시지 반환).
      - Go toolchain 기준을 `go 1.25.7`로 상향.
    - 프론트:
      - `react-router`를 보안 패치 버전(`^7.13.0`)으로 업데이트.
      - 서버 설정 API 타입을 `server` 전용으로 정리.
      - Ant theme `cssVar` 타입 변경(`true -> {}`)으로 빌드 타입 안정화.
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `pnpm -C apps/frontend build` 통과
      - `pnpm audit --prod` 결과 취약점 없음
      - `cd apps/backend && govulncheck ./...` 결과 취약점 없음
- **전체 보안점검 실시 완료** (2026-02-19):
    - 범위:
      - `apps/backend`, `apps/frontend` 코드/설정/의존성 전수 점검.
    - 주요 결과:
      - Critical: WebDAV 인증 부재 및 `webdav_enabled` 설정 미적용으로 `/dav/`가 항상 노출됨.
      - High: 기본 관리자 계정 fallback(`admin`/`admin1234`) 존재.
      - High: `react-router@7.10.0` 취약점 3건 확인(`pnpm audit --prod`).
      - High: Go 표준 라이브러리 취약점 3건 확인(`govulncheck`, `go1.25.5` 영향).
      - Medium: `/api/config` 응답의 DB 비밀번호 노출, `err.Error()` 직접 노출, 보안 헤더 부재.
    - 검증:
      - `pnpm audit --prod`
      - `govulncheck ./...`
      - `rg` 기반 정적 패턴 점검
- **다크모드 드래그 선택영역 농도 상향 완료** (2026-02-19):
    - 프론트:
      - `AntdApp`에 테마 클래스(`app-theme-dark`/`app-theme-light`)를 부여.
      - 다크 테마에서만 오버레이 농도를 `40%`로 상향(`--browse-selection-overlay-bg`).
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 계산 스타일: `color-mix(in srgb, #273647 40%, transparent)`
- **파일 익스플로러 드래그 선택영역 다크/라이트 적응 완료** (2026-02-19):
    - 프론트:
      - 드래그 오버레이 배경 변수(`--browse-selection-overlay-bg`)를 고정 RGBA에서 Ant 선택 토큰(`--ant-control-item-bg-active`) 기반 `color-mix`로 전환.
      - 다크/라이트 테마에서 선택 오버레이 농도가 자동으로 현재 선택 색 축을 따르도록 보정.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **파일 익스플로러 드래그 선택영역 반투명 적용 완료** (2026-02-19):
    - 프론트:
      - 박스 선택 오버레이(`BoxSelectionOverlay`) 배경을 약한 반투명(`--browse-selection-overlay-bg`)으로 조정.
      - 선택 테두리 스타일은 기존과 동일하게 유지.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **파일 익스플로러 드래그 선택영역 투명화 완료** (2026-02-19):
    - 프론트:
      - 박스 선택 오버레이(`BoxSelectionOverlay`)의 배경색을 제거하고 테두리만 유지하도록 변경.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **트리 폴더 아이콘/텍스트 수직 정렬 보정 완료** (2026-02-19):
    - 프론트:
      - `FolderTree`에 공통 클래스(`folder-tree`)를 부여하고 스위처 아이콘 마크업을 정렬 전용 클래스(`folder-tree-switcher-icon`)로 분리.
      - 트리 스위처를 flex 정렬로 고정(`.folder-tree .ant-tree-switcher`)해 폴더 아이콘과 노드 텍스트 중심선이 일치하도록 보정.
      - placeholder 영역(`folder-tree-switcher-placeholder`)도 동일 규격으로 맞춰 트리 밀림을 방지.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 실측: 아이콘/텍스트 중심선 오차 `-2.75px -> 0.25px`로 개선
- **선택 상태 색상 공통화 완료** (2026-02-19):
    - 프론트:
      - 테마 설정에 라이트/다크 공통 선택 토큰(`selection bg/hover/text`)을 추가.
      - 전역 토큰(`controlItemBgActive`, `controlItemBgHover`)과 Ant 컴포넌트 토큰(`Menu`, `Tree`)을 동일 선택 토큰으로 일원화.
      - 브라우즈 선택 변수(`--browse-selection-bg`, `--browse-dragover-bg`)를 `.ant-app` 레벨에서 Ant 토큰 변수와 연결해 파일 선택/트리 선택/설정 메뉴 선택이 동일 색상 축을 사용하도록 정리.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 브라우저 계산 스타일 확인:
        - Space 트리 선택 배경: `rgb(39, 54, 71)`
        - Settings 메뉴 선택 배경: `rgb(39, 54, 71)`
        - 브라우즈 선택 카드 배경: `rgb(39, 54, 71)`
- **선택 외곽선/그림자 강조 제거 완료** (2026-02-19):
    - 프론트:
      - 테이블 선택 행에 추가했던 inset 외곽선(box-shadow) 제거.
      - 그리드 선택 카드에 추가했던 경계선(`borderColor`) 및 그림자(`boxShadow`) 제거.
      - 선택 강조는 배경색(`--browse-selection-bg`) 중심으로 유지.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **모바일 파일익스플로러 터치 스크롤 및 다크모드 선택 가시성 보정 완료** (2026-02-19):
    - 프론트:
      - 파일 목록 스크롤 컨테이너(`selectionContainerRef`)에 모바일 터치 스크롤 최적화(`touchAction: pan-y`, `WebkitOverflowScrolling: touch`)를 적용.
      - 모바일에서 아이템 카드/행의 `onTouchMove` 핸들러를 제거해 터치 스크롤 제스처 간섭을 완화.
      - 스크롤 중 롱프레스 오동작 방지를 위해 컨테이너 `onScroll` 시 롱프레스 타이머를 즉시 해제.
      - 다크모드에서 선택 강조 대비를 높이기 위해 선택 색상 변수(`--browse-selection-*`)를 상향 조정하고, 테이블 선택 행에 경계선(inset) 강조를 추가.
      - 그리드/테이블 뷰 전환 버튼의 활성 상태를 토큰 기반 고대비 스타일로 변경해 선택된 뷰가 즉시 식별되도록 보강.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - 모바일 에뮬레이션(iPhone viewport)에서 파일 목록 컨테이너 스크롤 가능 상태 확인(`clientHeight 688`, `scrollHeight 1268`, `touchAction pan-y`)
      - 다크모드에서 뷰 전환 버튼 활성 대비 확인(활성 `rgb(58, 80, 104)` / 비활성 `rgb(22, 31, 48)`)
      - 스크린샷: `/tmp/cohesion-mobile-dark-view-toggle-table.png`, `/tmp/cohesion-mobile-dark-view-toggle-grid.png`
- **블루-그레이 팔레트 전역 테마 적용 완료** (2026-02-19):
    - 프론트:
      - Ant Design 전역 테마를 루트 `ConfigProvider`로 통합해 로그인/메인/설정 전체 라우트에 동일 테마 컨텍스트를 적용.
      - 제공된 팔레트(`ink_black`, `prussian_blue`, `dusk_blue`, `dusty_denim`, `alabaster_grey`)를 기반으로 라이트/다크 토큰 시드를 구성(`buildCohesionThemeConfig`).
      - `MainLayout`, `Settings`의 개별 `ConfigProvider` 중복 래핑을 제거하고 루트 프로바이더 단일화.
      - 브라우즈/업로드/선택 오버레이/아이콘/트리/모달 등 하드코딩 색상을 토큰/커스텀 CSS 변수(`--app-*`, `--browse-*`) 기반으로 치환.
      - Ant CSS 변수 참조를 kebab-case(`--ant-color-primary` 등)로 정정해 fallback 의존 없이 토큰값이 실제 반영되도록 보정.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `http://localhost:5173/login` 계산 스타일 확인:
        - 다크: `--ant-color-bg-layout = #08111a`, 배경 `rgb(8, 17, 26)`
        - 라이트: `--ant-color-bg-layout = #f2f3f1`, 배경 `rgb(242, 243, 241)`
      - 스크린샷: `/tmp/cohesion-theme-login-dark.png`, `/tmp/cohesion-theme-login-light.png`
- **로그인 화면 배경 회색 처리 완료** (2026-02-19):
    - 프론트:
      - 로그인 페이지 래퍼(`.login-page`) 배경을 공통 Ant 토큰(`--ant-color-bg-layout`, fallback `#f2f3f1`)으로 적용.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
      - `http://localhost:5173/login` 화면 스크린샷 및 계산 스타일(`rgb(242, 243, 241)`) 확인
- **상단 고정 툴바 위 간격 보정 완료** (2026-02-18):
    - 프론트:
      - `툴바 아래 여백` 변경은 되돌리고, 상단 툴바 슬롯에 `marginTop: 8px`를 적용해 상단 고정 상태에서 헤더와의 시각 간격을 확보.
      - 파일 목록 컨테이너 상단 패딩은 기존 `16px` 유지.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **모바일/PC 선택모드 상단 로우 고정 높이 전환 완료** (2026-02-18):
    - 프론트:
      - 모바일/PC 공통으로 상단 로우를 단일 슬롯 교체 구조로 정리.
      - 모바일은 `X개 항목` 선택바, PC는 데스크톱 선택 액션바를 기존 툴바 자리에 동일 높이 슬롯에서 교체 렌더링.
      - 상단 슬롯 높이를 모바일 `44px`, PC `52px`로 고정.
      - PC 선택바의 `선택 해제` 텍스트 버튼을 `X` 아이콘 버튼으로 변경.
      - 모바일 선택바 아이콘 순서를 PC와 동일 기준(다운로드 → 복사 → 이동)으로 정렬.
      - 선택 상태 진입/해제 시 본문 영역 높이 점프를 제거.
      - `FolderContentToolbar`의 `compact` 모드에 수평 오버플로우 처리를 추가해 한 줄 슬롯 레이아웃 유지.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **파일 익스플로러 외곽 여백(좌우상하) 드래그 시작 개선 완료** (2026-02-18):
    - 프론트:
      - 박스선택 컨테이너를 그리드 전용 래퍼에서 공통 콘텐츠 스크롤 래퍼로 상향(`selectionContainerRef`)해 외곽 여백에서 드래그 시작 가능하도록 보정.
      - `FileExplorer` 외곽 패딩은 유지한 채, 선택 컨테이너에 음수 마진/내부 패딩(`top/right/bottom/left`)을 적용해 외곽 여백을 드래그 가능한 컨테이너 영역으로 편입.
      - 박스선택은 기존 정책대로 PC 그리드에서만 활성화 유지.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **공통 헤더 높이 소폭 축소 완료** (2026-02-18):
    - 프론트:
      - 전역 레이아웃 헤더 클래스(`layout-header`) 높이를 `56px`로 조정해 메인/설정 상단 밀도를 통일.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **BottomSheet 액션 메뉴 아이콘/텍스트 행 정렬 보정 완료** (2026-02-18):
    - 프론트:
      - `drive_file_move` Material 아이콘에 공통 클래스(`move-action-icon`)를 적용해 아이콘 박스 폭/베이스라인을 Ant 아이콘과 일치시킴.
      - 모바일 BottomSheet 메뉴와 테이블 컨텍스트 메뉴에서 `이동` 항목의 텍스트 시작점이 다른 줄과 맞도록 정렬 보정.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **모바일 하단 잘림/설정 계정관리 테이블/테이블 멀티선택 보정 완료** (2026-02-18):
    - 프론트:
      - `AccountSettings` 테이블에 모바일 대응(`scroll.x`, 컬럼 `ellipsis`, 액션 버튼 `wrap`)을 적용해 작은 화면에서 UI 깨짐을 완화.
      - 공통 레이아웃을 `100dvh` 기반으로 보정하고 `layout-content-scroll`에 safe-area 하단 패딩을 추가해 모바일 하단 잘림을 완화.
      - `FileExplorer` 높이 계산을 `100vh` 고정값에서 부모 레이아웃 종속(`height: 100%`, `minHeight: 0`)으로 전환.
      - `useFileSelection`을 ref 기반 앵커 추적으로 보강해 테이블 뷰의 연속/범위 멀티선택 안정성을 개선.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **BottomSheet 테스트용 임시 메뉴 제거 완료** (2026-02-18):
    - 프론트:
      - 모바일 선택 액션 BottomSheet에서 UX 재현용 임시 메뉴 항목(`임시 항목`)을 제거.
      - 실제 액션 메뉴만 남겨 운영 UI를 정리.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **BottomSheet 상향 복귀 드래그 불가 버그 수정 완료** (2026-02-18):
    - 프론트:
      - 본문 영역 터치 시작 후 시트를 아래로 내린 상태(`dragOffset > 0`)에서 위로 드래그할 때, 제스처 모드를 즉시 `scroll`로 전환하지 않도록 조건 보정.
      - 이로써 하강 후 같은 제스처/후속 제스처에서 시트가 다시 위로 복귀 가능하도록 동작 복원.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **BottomSheet 최대 높이 정책 조정 완료** (2026-02-17):
    - 프론트:
      - 모바일 선택 액션 BottomSheet의 `snapPoints`를 `0.56`에서 `1`로 상향.
      - `BottomSheet` 컴포넌트가 `snapPoints=1`을 유효값으로 인식하도록 상한 필터를 조정.
      - 콘텐츠 스크롤은 시트가 충분히 확장된 이후(실질적 최대 높이 근접) 발생하도록 UX 보정.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **BottomSheet 테스트용 임시 메뉴 30개 추가** (2026-02-17):
    - 프론트:
      - 모바일 선택 액션 BottomSheet 메뉴 하단에 `임시 항목 1~30`을 추가해 스크롤/드래그 UX를 재현하기 쉽게 구성.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **BottomSheet 터치 드래그 passive 이벤트 경고 수정 완료** (2026-02-17):
    - 프론트:
      - `BottomSheet`의 `onTouchMove`에서 `preventDefault()` 호출을 제거(React passive touch listener 경고 회피).
      - 본문 영역에서 아래로 당길 때, `scrollTop > 0`이면 본문 스크롤을 우선 소모하고 `scrollTop === 0`부터 시트 하강 드래그가 시작되도록 전환.
      - 본문 드래그 이동량을 먼저 스크롤 감소에 소비하고, 남은 이동량으로 시트 하강을 이어받도록 보강(한 제스처 연속 전환).
      - 터치 입력은 패널 native listener(`touchmove: passive:false`)로 처리하고, 포인터 터치 경로는 분리해 드래그 움찔 현상 완화.
      - `shouldRender` 조기 반환 위치를 Hook 선언 이후로 이동해 Hook 호출 순서 변경 오류를 해소.
      - 본문 영역에서는 네이티브 스크롤을 우선 유지하고, `scrollTop === 0`에서 아래 방향 드래그일 때만 시트 드래그가 시작되도록 모드 분리.
      - 스크롤 상단 도달 직후 드래그 끊김 완화를 위해 터치 계산을 `ref` 기반 연속 상태로 전환하고, 리스너 재등록 빈도를 감소.
      - `fromContentScroll`/`lastTouchY` 상태를 도입해 top 도달 첫 프레임의 잔여 이동량을 시트 드래그로 즉시 전달하도록 전환 지연 보정.
      - 시트 리사이즈를 `height` 변경에서 `translateY` 오프셋 드래그로 전환해 스크롤↔드래그 경계 레이아웃 부하를 완화.
      - Chrome 경고(`Unable to preventDefault inside passive event listener invocation`) 발생 경로 제거.
    - 검증:
      - `pnpm -C apps/frontend exec tsc --noEmit` 통과
- **Space 절대경로 비노출 구조 1차 적용 완료** (2026-02-17):
    - 백엔드:
      - `GET /api/spaces` 응답에서 `space_path` 제거(클라이언트 노출 차단).
      - `GET /api/spaces/{id}/browse`의 파일 `path`를 Space 상대경로로 변환하여 반환.
      - Space 목록 응답은 사용자별 Space 접근 권한(`read`) 필터링 유지.
    - 프론트:
      - 탐색기 경로 모델을 Space 상대경로 중심으로 전환(`selectedPath`를 relative path로 사용).
      - 트리/브레드크럼/파일작업(업로드/이동/복사/삭제/다운로드) 로직을 relative path 기준으로 정렬.
      - 설정/모달에서 절대경로 텍스트 노출 제거 유지.
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `cd apps/frontend && pnpm exec tsc --noEmit` 통과
- **RBAC 하드닝 및 테스트 보강 완료** (2026-02-17):
    - 백엔드:
      - 사용 중인 Role 삭제 차단(해당 Role 사용자 존재 시 삭제 불가).
      - 시스템 Role 권한 전체 제거 차단(최소 1개 권한 유지 강제).
      - 에러/메시지의 Role 표기 통일(`Role`).
    - 프론트:
      - 권한 관리에서 현재 로그인 사용자의 Role 권한을 저장하면 `refreshSession()` 즉시 실행해 메뉴/권한 상태 실시간 반영.
      - UI 문구의 `역할` 표기를 `Role`로 통일.
    - 테스트:
      - `internal/account/service_rbac_test.go`: 사용 중 Role 삭제 차단, 시스템 Role 빈 권한 차단.
      - `internal/auth/permissions_test.go`: `/api/roles`, `/api/permissions` 권한 매핑 검증.
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend build` 통과
- **편집형 RBAC 관리(역할/권한) 1차 구현 완료** (2026-02-17):
    - 백엔드:
      - DB 스키마에 `roles`, `permissions`, `role_permissions` 추가 및 기본 시드(admin/user + 권한 키) 적용.
      - 기존 DB의 `users.role CHECK(admin|user)` 제약을 제거하는 마이그레이션 추가(데이터 보존).
      - 역할 관리 API 추가:
        - `GET/POST /api/roles`
        - `DELETE /api/roles/{name}`
        - `PUT /api/roles/{name}/permissions`
        - `GET /api/permissions`
      - 인증 권한 체크를 역할별 DB 매핑 기반으로 전환(`GetRolePermissionKeys` 조회).
    - 프론트:
      - 설정 `권한 관리` 섹션을 편집형 UI로 전환:
        - 역할 생성/삭제
        - 역할별 권한 체크/저장
      - 계정관리의 역할 목록을 하드코딩에서 서버 조회 기반으로 전환.
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend build` 통과
- **권한 2차 적용 시작: Space/File API 가드 + 파일 액션 UI 제한** (2026-02-17):
    - 백엔드:
      - `/api/spaces`, `/api/spaces/{id}/browse`, `/api/spaces/{id}/files/*`, `/api/browse*`에 권한 키 매핑 추가.
      - `space.write` 권한 키 추가(관리자 전용) 및 role-permission 매핑 반영.
      - Space ID 기반 리소스 권한 체크(`CanAccessSpaceByID`)를 인증 미들웨어에 연동.
        - 파일 다운로드 계열: `read`
        - 파일 변경 계열(업로드/이동/복사/삭제/이름변경/폴더생성): `write`
    - 프론트:
      - `file.write` 미보유 시 탐색기 쓰기 액션 UI 비노출:
        - 업로드 버튼
        - 선택바의 이동/복사/이름변경/삭제
        - 모바일 More/액션시트 쓰기 액션
      - 쓰기 권한 없을 때 드래그 이동/업로드 DnD 비활성화.
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend build` 통과
- **권한 키 기반 API 접근 제어 1차 정리 완료** (2026-02-17):
    - 백엔드 인증 미들웨어를 `admin 전용 경로 하드코딩`에서 `권한 키 매핑` 방식으로 전환.
      - `/api/accounts*` → `account.read`(GET) / `account.write`(변경)
      - `/api/config` → `server.config.read|write`
      - `/api/system/restart` → `server.config.write`
    - `ftp.manage` 별도 권한은 두지 않고 `server.config.*`로 통합 유지.
    - `/api/auth/login|refresh|me` 응답에 `permissions` 배열 포함.
    - 프론트 Settings 메뉴를 권한 기반으로 노출 제어:
      - `서버`: `server.config.read|write` 보유 시 노출
      - `계정 관리`: `account.read|write` 보유 시 노출
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `pnpm -C apps/frontend lint` 통과
      - `pnpm -C apps/frontend build` 통과
- **인증 401 전역 처리 + 보안 하드닝 적용 완료** (2026-02-16):
    - 프론트 공통 API 레이어 `apiFetch` 추가 (`apps/frontend/src/api/client.ts`)
      - 모든 API `fetch`를 `apiFetch`로 통일.
      - 401 수신 시 refresh 재시도 후 실패하면 `/login` 리다이렉트.
    - 백엔드 보안 하드닝:
      - 프로덕션에서 `COHESION_JWT_SECRET` 미설정/짧은 값(32자 미만) 차단.
      - 프록시 HTTPS(`X-Forwarded-Proto=https`) 환경에서도 `Secure` 쿠키 유지.
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과
- **Settings 내 프로필/로그아웃 섹션 추가 완료** (2026-02-16):
    - 설정 메뉴 최상단에 `내 프로필` 섹션 추가.
    - 현재 로그인 사용자 정보(아이디/닉네임/권한) 표시.
    - `새로고침`(세션 갱신) 및 `로그아웃` 버튼 추가.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과.
- **JWT 로그인 1차 구현 완료** (2026-02-16):
    - 백엔드 `internal/auth` 모듈 신설:
      - `POST /api/auth/login`, `POST /api/auth/refresh`, `POST /api/auth/logout`, `GET /api/auth/me`
      - `access(15분)` + `refresh(7일)` JWT 발급
      - HttpOnly 쿠키 저장 (`cohesion_access_token`, `cohesion_refresh_token`)
    - API 인증 미들웨어 적용:
      - `/api/*` 기본 인증 강제 (`/api/health`, `/api/auth/login|refresh|logout` 예외)
      - 관리자 전용 경로 제한: `/api/accounts*`, `/api/config`, `/api/system/restart`
    - 프론트 인증 흐름 추가:
      - `AuthProvider` 세션 부트스트랩(`me -> refresh -> me`)
      - 보호 라우트(`RequireAuth`) 및 `/login` 페이지 추가
      - 전역 라우팅에서 `/`, `/settings` 인증 가드 적용
    - 검증:
      - `cd apps/backend && go test ./...` 통과
      - `pnpm -C apps/frontend build` 통과
- **Settings 계정관리 페이지(프론트) 추가 완료** (2026-02-16):
    - 설정 사이드 메뉴에 `계정 관리` 섹션 추가.
    - 프론트 API 유틸 `apps/frontend/src/api/accounts.ts` 추가:
      - `GET/POST /api/accounts`
      - `PATCH/DELETE /api/accounts/{id}`
    - `AccountSettings` 섹션 추가:
      - 계정 목록 조회(Table)
      - 계정 생성(아이디/비밀번호/닉네임/권한)
      - 계정 수정(닉네임/권한/선택적 비밀번호 변경)
      - 계정 삭제
    - 검증: `pnpm -C apps/frontend build` 통과.
- **계정 관리 1차(백엔드) + FTP 계정/권한 연동 완료** (2026-02-16, #72):
    - DB 스키마 확장:
      - `users`(username/password_hash/nickname/role[admin|user])
      - `user_space_permissions`(user_id/space_id/permission[read|write|manage])
    - 백엔드 `internal/account` 모듈 신설:
      - 사용자 CRUD API: `GET/POST /api/accounts`, `PATCH/DELETE /api/accounts/{id}`
      - 권한 API: `GET/PUT /api/accounts/{id}/permissions`
      - 기본 admin 자동 생성(`COHESION_ADMIN_USER`, `COHESION_ADMIN_PASSWORD`, 기본 `admin/admin1234`)
    - FTP 인증을 고정 계정 방식에서 계정 테이블 기반 인증으로 전환.
    - FTP 권한 연동:
      - `admin`은 모든 Space 접근 허용.
      - `user`는 `user_space_permissions` 기반으로 Space 접근 제어.
      - 읽기/쓰기 연산 권한 분리(`read` vs `write/manage`).
    - 검증: `go test ./...` (apps/backend), `pnpm -C apps/frontend build` 통과.
- **FTP 서버 1차 구현 완료** (2026-02-16, #70):
    - 백엔드 `internal/ftp` 모듈 신설:
      - Space 기반 가상 루트 드라이버(`/{spaceName}/...`) 구현.
      - FTP start/stop 서비스 및 인증(`COHESION_FTP_USER`, `COHESION_FTP_PASSWORD`, 기본 `cohesion/cohesion`) 적용.
    - `main.go` 재시작 lifecycle에 FTP 서버 기동/종료 연동.
    - 상태 API `/api/status`의 FTP 항목을 하드코딩 `미구현`에서 실제 TCP 연결 기반 헬스체크로 전환.
    - 설정 파일 기본 포트 정리:
      - `config.dev.yaml`: `ftp_port: 2121`
      - `config.prod.yaml`: `http/webdav/ftp/sftp` 기본 키 추가 및 `ftp_port: 2121`
    - 프론트 Settings FTP UI의 `(구현 예정)` 문구 제거.
    - 검증: `go test ./...` (apps/backend), `pnpm -C apps/frontend build` 통과.
- **Settings 잔여 인라인 스타일 공통 클래스화 완료** (2026-02-16):
    - `settings.css`에 공통 유틸 클래스(`settings-nav-menu-full`, `settings-select-*`, `settings-divider-compact`, `settings-port-input` 등) 추가.
    - `GeneralSettings`, `FileSettings`, `ServerSettings`의 반복 인라인 스타일을 공통 클래스로 치환.
    - `MainLayout`/`MainSider`에도 잔여 구조 스타일을 공통 클래스(`layout-content-scroll-hidden`, `layout-sider-title`)로 정리.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과.
- **Main/Settings 헤더·사이드 + Settings 섹션 공통 컴포넌트화 완료** (2026-02-15):
    - 전역 레이아웃 클래스(`layout-*`)로 메인/세팅의 페이지/헤더/사이드/본문 골격을 통일.
    - 공통 헤더 컴포넌트(`HeaderBrand`, `HeaderGroup`)를 도입해 상단 브랜드/액션 그룹 구조를 일관화.
    - Settings 섹션 공통 컴포넌트(`SettingSectionHeader`, `SettingRow`)를 도입해 반복 마크업을 제거.
    - Settings 사이드 메뉴 아이템 패딩/높이를 조정해 메뉴 밀도를 정리.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과.
- **Grid 아이템 가로 채움 레이아웃 적용 완료** (2026-02-15):
    - 데스크톱 Grid 컬럼을 `repeat(auto-fill, minmax(172px, 1fr))`로 전환.
    - 아이템 배열 이후 남는 가로 여백이 카드 폭으로 자연스럽게 분배되도록 조정.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **파일 목록 스크롤바 경량 스타일 정리 완료** (2026-02-15):
    - 커스텀 오버레이 기반 페이드 인디케이터를 제거하고 네이티브 스크롤 동작으로 복원.
    - 전역 스크롤바 스타일을 6px 얇은 thumb/투명 track 기반의 경량 테마로 정리.
    - 정렬 Select를 고정폭(160px)에서 `fit-content`로 전환해 옵션 길이에 맞춰 폭이 맞도록 조정.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과.
- **PC 모달 오픈 중 배경 선택 변경 버그 수정 완료** (2026-02-15):
    - 원인: Grid 박스선택 훅(`useBoxSelection`)의 전역 `window.mousedown` 경로가 모달 오픈 상태에서도 동작.
    - 조치: 모달 오픈 시 박스선택 비활성화 + 모달 레이어 타깃/오픈 마스크 감지 시 박스선택 시작 차단.
    - 추가 보강: 모달 관련 탭/컨텍스트 메뉴/컨테이너 클릭 가드 경로 정리.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과 및 브라우저 수동 재현 테스트에서 선택 유지 확인.
- **PC/모바일 이동 아이콘 일원화 완료** (2026-02-15):
    - `FolderContentSelectionBar`의 이동 아이콘을 가위 아이콘에서 Material Symbols `drive_file_move`로 전환.
    - 모바일 선택 헤더와 동일 아이콘으로 액션 의미를 통일.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과.
- **모바일 선택모드 헤더 전환 완료** (2026-02-15):
    - 모바일 선택모드에서는 하단 툴바 대신 상단 헤더 영역을 선택 전용 툴바(`X/개수/이동/복사/다운로드/:`)로 전환.
    - 하단 액션시트는 `:` 버튼으로 유지하고, 보조 액션(`이름 변경`, `삭제`)을 배치.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과.
- **모바일 선택 툴바 구조 단순화 완료** (2026-02-15):
    - 모바일 선택 툴바를 하단 배치로 복원하고 `safe-area`를 반영해 하단 잘림을 방지.
    - `:` 버튼 및 하단 액션시트를 제거하고, `복사`/`다운로드`를 툴바 직접 액션으로 이동.
    - `삭제` 버튼을 우측 끝에 배치해 위험 액션을 분리.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과.
- **모바일 선택 툴바 상단 배치 + 린트 안정화 완료** (2026-02-15):
    - 모바일 선택 툴바/터치 실드의 고정 위치를 하단(`bottom`)에서 상단(`top`)으로 이동.
    - `FolderContent`의 effect 내부 동기 `setState` 경로를 정리해 React Hooks lint 에러 해소.
    - `useBoxSelection`, `useDragAndDrop`, `ServerSettings`의 hook dependency 누락을 보정.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build`, `go test ./...` 통과.
- **트리 메뉴 화살표를 폴더 상태 아이콘으로 전환 완료** (2026-02-15):
    - `FolderTree`에서 기본 화살표(`switcher`) 대신 폴더 닫힘/열림 아이콘으로 확장 상태를 표현.
    - 최종 아이콘 세트는 Material Symbols Rounded(`folder`/`folder_open`)로 확정.
    - 중복 아이콘을 방지하기 위해 `showIcon` 기반 기본 아이콘 렌더링 제거.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **헤더/툴바 아이콘 버튼 텍스트 제거 완료** (2026-02-15):
    - `FolderContentToolbar` 업로드 버튼을 아이콘 전용으로 전환(`aria-label`, `title` 유지).
    - `MainLayout` 설정 버튼을 아이콘 전용으로 전환(`aria-label`, `title` 유지).
    - 검증: `pnpm -C apps/frontend build` 통과.
- **PC Grid 박스선택 실시간 교차 모드 전환 완료** (2026-02-14, #60):
    - `useBoxSelection` 선택 계산을 누적 방식에서 실시간 교차 방식으로 변경.
    - 드래그/스크롤 중 현재 박스와 교차하는 항목 기준으로 선택 집합이 즉시 증감되도록 조정.
    - Ctrl/Cmd/Shift 보조키 정책은 유지하되, 실시간 교차 집합 기준으로 적용.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **모바일 내부 드래그 이동 비활성화 적용 완료** (2026-02-14):
    - 모바일(`sm` 미만)에서는 Grid/Table 아이템의 내부 드래그 이동(`draggable`, `onDrag*`, `onDrop`)을 비활성화.
    - 데스크톱에서는 기존 내부 드래그 이동 동작 유지.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **모바일 롱프레스 선택모드 전환 UX 적용 완료** (2026-02-14):
    - 모바일(`sm` 미만)에서 아이템 롱프레스 시 선택모드로 진입하고, 눌렀던 항목을 첫 선택으로 반영.
    - 선택모드에서는 탭으로 폴더/파일 모두 멀티 선택/해제가 가능하도록 동작 변경.
    - 선택모드가 아닐 때는 폴더 단일 탭 진입을 유지하고, Table 뷰 체크박스는 숨겨 선택 진입 경로를 롱프레스로 일원화.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **모바일 단일 탭 폴더 진입 적용 완료** (2026-02-14):
    - 모바일(`sm` 미만)에서 폴더 항목 단일 탭 시 선택이 아닌 즉시 폴더 진입(`setPath`)되도록 동작 변경.
    - 기존 더블클릭 진입 동작은 데스크톱 흐름으로 유지.
    - 검증: `pnpm -C apps/frontend build` 통과, 모바일 뷰포트 수동 테스트에서 단일 탭 진입 확인.
- **모바일 앨범뷰/헤더 토글 UX 정리 완료** (2026-02-14):
    - Grid(앨범) 뷰에서 모바일 구간(`sm` 미만) 기본 2열 레이아웃(`repeat(2, minmax(0, 1fr))`) 적용.
    - 헤더의 다크/라이트 토글을 제거하고, 테마 변경 진입점을 `설정 > 외관`으로 단일화.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **메인 네비게이션 Drawer 도입 완료** (2026-02-14, #55):
    - `MainLayout`에 `Drawer` 기반 네비게이션 패널을 추가하고 헤더에 `탐색기` 버튼을 배치.
    - 반응형 분기 적용: 모바일(`lg` 미만)은 Drawer 중심, 데스크톱은 기존 고정 Sider 유지 + Drawer 병행 사용.
    - `MainSider`를 `Sider`/`Drawer` 공용으로 재사용 가능하도록 `containerType` 구조로 정리.
    - 모바일 Drawer에서 경로 선택 시 자동 닫힘 처리.
    - 데스크톱 헤더에서는 `탐색기` 버튼을 숨겨 시각적 노이즈를 줄이고, 모바일에서만 노출하도록 조정.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **Status 웹 접근 주소 다중 노출 복원 완료** (2026-02-14):
    - `status.hosts`를 다시 사용해 `localhost`와 LAN IP 주소를 함께 표시.
    - 표시 포트는 백엔드 포트가 아닌 현재 웹 포트(`window.location.port`)로 통일해 `vite host: true` 환경에서도 실제 접속 주소를 노출.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **Status WEB 포트 표시 복원 완료** (2026-02-14):
    - WEB 상태 행에 현재 브라우저 기준 포트(`window.location.port`, 기본 80/443 fallback)를 다시 표시.
    - 포트 계산 책임은 프론트에 유지하고, 표시 형식은 `:{port}/`로 통일.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **Status 웹 접근 포트 계산 책임 분리 완료** (2026-02-14):
    - 백엔드의 WEB 포트 하드코딩(`5173`)을 제거하고, 프론트에서 `window.location.origin`으로 웹 접근 주소를 계산하도록 변경.
    - 개발환경에서는 현재 접속 origin(`:5173`), 프로덕션에서는 내장 서버 origin(`:3000` 등 설정 포트)을 자동 반영.
    - 검증: `go test ./...` (in `apps/backend`), `pnpm -C apps/frontend build` 통과.
- **Status 팝오버 웹 접근 정보 정리 완료** (2026-02-14):
    - `/api/status`의 HTTP 경로 표기를 `/api/`에서 웹 루트(`/`) 기준으로 변경.
    - 상태 팝오버의 HTTP 라벨을 `WEB`으로 조정하고, 접근 주소를 `http://{host}/` 형태로 표시.
    - 검증: `go test ./...` (in `apps/backend`), `pnpm -C apps/frontend build` 통과.
- **Table 뷰 세로 스크롤 복구 완료** (2026-02-13):
    - `FolderContent` 루트에 `minHeight: 0`을 추가해 내부 스크롤 영역 축소/확장이 가능하도록 조정.
    - Table 뷰를 `flex:1 + overflowY:auto` 래퍼로 감싸 하단 항목까지 스크롤 가능하도록 수정.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **Space 생성 모달 입력/설명 전달 개선 완료** (2026-02-13):
    - `DirectorySetupModal`의 이름/설명 입력 비활성 조건을 전역 `spaceStore.isLoading`에서 분리하고, 로컬 `isCreating` 상태로 제출 시점에만 잠그도록 변경.
    - 설명 입력값(`spaceDesc`)을 Space 생성 API payload(`space_desc`)로 전달하도록 `spaceStore.createSpace` 시그니처 확장.
    - 브라우저 확인: `새 Space 생성` 모달에서 이름/설명 입력 가능 확인.
    - 검증: `pnpm -C apps/frontend build` 통과.
- **싱글/멀티 다운로드 분기 처리 완료** (2026-02-13):
    - 프론트엔드 `handleBulkDownload`에서 선택 항목이 1개일 때 `download` 단일 API를 호출하도록 분기.
    - 멀티 선택(2개 이상)일 때만 `download-multiple` ZIP API를 호출하도록 유지.
    - 백엔드 `download-multiple`에도 안전 분기 추가: 요청 경로가 1개 파일이면 ZIP 없이 원본 스트리밍, 1개 폴더면 ZIP, 2개 이상은 ZIP.
    - 검증: `pnpm -C apps/frontend build`, `go build ./...` (in `apps/backend`) 통과.
- **Ant Design message 컨텍스트 경고 제거 완료** (2026-02-13):
    - `/settings` 라우트에 `antd` `App` 프로바이더를 추가해 메시지 컨텍스트를 보장.
    - 정적 `message`/`Modal.confirm` 호출을 `App.useApp()` 기반 호출로 전환.
    - 검증: `pnpm -s build` (in `apps/frontend`) 통과.
- **Folder Explorer 가로 스크롤 최소화 및 자동 컬럼 배치 적용 완료** (2026-02-13):
    - Grid 카드 레이아웃을 `auto-fit + minmax` 기반의 자동 컬럼 배치로 전환.
    - 카드 단일 노출 시 과도한 확장을 방지하기 위해 카드 최대 폭(220px) 제한을 적용.
    - 외곽 컨테이너 스크롤을 숨기고, Grid 영역을 `overflowY` 중심으로 분리하여 가로 스크롤 발생을 억제.
    - Toolbar/SelectionBar에 wrap을 적용해 좁은 해상도에서 버튼/경로가 줄바꿈되도록 개선.
    - 썸네일을 `cover` 기준으로 카드 프리뷰 영역에 밀착되게 표시하고, 카드/그리드 간격을 더 촘촘하게 조정.
    - 검증: `pnpm -C apps/frontend build` 통과, 1200/900/700 폭에서 가로 오버플로우 없음 확인.
- **트리 targeted invalidation 최적화 완료** (2026-02-13, #35):
    - 전역 리셋 방식(`treeRefreshVersion` 단독)에서 경로 기반 무효화 타깃(`treeInvalidationTargets`) 방식으로 확장.
    - 파일 작업 후 영향 경로(소스 부모/대상 부모)만 invalidate 하도록 변경.
    - `FolderTree`에서 타깃 노드만 children/loaded state를 부분 무효화하고, 영향 없는 노드는 유지.
    - 메인 사이드바 트리와 DestinationPickerModal 트리 모두 동일 store 이벤트를 통해 일관 갱신.
    - 검증: `pnpm -C apps/frontend lint`, `pnpm -C apps/frontend build` 통과.
- **기능 구현 완료**: Google Drive 스타일의 파일 탐색 GUI 구현.
    - 백엔드 API 고도화 (파일 크기, 수정일 정보 추가).
    - 프론트엔드 `FolderContent`를 `Table` 기반으로 전면 개편.
    - Breadcrumb 내비게이션 및 폴더 진입/탐색 기능 추가.
- **버그 수정**: 트리 중복 생성 및 확장 불능 문제 해결 상태 유지 확인.
- **Space 연동 완료** (2026-02-04):
    - **통합 트리 구조**: Space 목록과 FolderTree를 하나의 트리로 완전 통합.
    - Spaces가 트리의 루트 노드로 표시, 확장 시 해당 Space의 하위 디렉토리 로드.
    - Space 메뉴 제거, 단일 트리 구조로 단순화.
    - `FolderTree`가 `spaces` prop을 받아 Space 노드 생성 및 lazy loading 처리.
    - `MainSider`: Spaces 헤더 + 버튼, 통합 FolderTree.
    - `FileExplorer` 단순화: FolderContent만 전체 화면으로 표시.
    - 모달에서는 `showBaseDirectories` 플래그로 시스템 디렉토리 탐색.
    - 파일: `MainLayout/index.tsx`, `MainSider.tsx`, `FileExplorer.tsx`, `FolderTree.tsx` 수정.
- **코드 품질 개선** (2026-02-04):
    - Serena MCP 필수 사용 규칙을 `CLAUDE.md`에 추가.
    - 여러 Serena replace_symbol_body 사용 시 발생한 중복 코드 제거.
    - ESLint 에러 수정: 파싱 에러, 사용하지 않는 import, any 타입 등.
    - React 권장 패턴 준수: useEffect에서 setState 제거, 올바른 폼 초기화.
    - 테마 대응: 텍스트 색상이 다크/라이트 모드에 맞춰 자동 변경.

- **문서 구조 개편** (2026-02-04):
    - `CLAUDE.md`를 `.claude/CLAUDE.md`로 이동 (Claude Code CLI 전용 설정).
    - `GEMINI.md` 간소화: "docs/master_rule.md를 먼저 읽기"로 단순화.
    - `docs/master_rule.md`에 모든 규칙 통합:
        - Playwright MCP 브라우저 테스트 절차 추가.
        - 디자인 규칙 (8px 그리드, 일관된 radius 등) 명시.
        - 커밋 메시지 규칙 (한글, 간결체) 추가.
        - Serena MCP 사용 상세 규칙을 GEMINI.md에서 이동.
    - `.gitignore`에 테스트/디버깅 디렉토리 추가 (.playwright-mcp/, .serena 등).

- **문서 구조 개선** (2026-02-04):
    - `docs/AGENTS.md` 생성: 실행 환경 정보 통합 문서.
        - 프로젝트 구조, 서버 실행, 빌드, 포트 정보.
        - 테스트 방법, 트러블슈팅, 패키지 관리.
    - `.claude/CLAUDE.md`, `GEMINI.md` 수정: AGENTS.md 읽기 추가.
- **Space 상대 경로 Breadcrumb 구현 완료** (2026-02-04):
    - FolderTree: Space 선택 시 Space 정보도 함께 전달하도록 수정.
    - MainLayout: selectedSpace state 추가 및 Outlet context에 포함.
    - FileExplorer: OutletContext에 selectedSpace 추가.
    - FolderContent: Space 상대 경로로 Breadcrumb 표시.
        - Space 선택 시: "SpaceName / folder1 / folder2" 형식.
        - Space 미선택 시: 기존 절대 경로 유지.
    - 타입 에러 수정 (FolderContent, DirectorySetupModal).
    - Playwright 브라우저 테스트 완료: Breadcrumb 정상 작동 확인.

- **Space 삭제 기능 구현 완료** (2026-02-04):
    - FolderTree: Space 노드에 Context Menu (Dropdown) 추가.
    - MainSider: useDeleteSpace 훅 사용하여 삭제 로직 구현.
    - 삭제 확인 Modal (Modal.confirm) 추가.
    - 삭제 후 Space 목록 자동 갱신.
    - 성공/실패 메시지 표시 (message.success/error).
    - Playwright 브라우저 테스트 완료: Context Menu, 확인 모달, 삭제 후 트리 갱신 모두 정상 작동 확인.

- **파일 표시 버그 수정 완료** (2026-02-04):
    - 문제: FolderContent에서 폴더만 표시되고 파일이 표시되지 않음.
    - 원인: `browse_handler.go`의 `ListDirectory` 호출 시 `isOnlyDir` 파라미터가 `true`로 설정되어 있어 파일 필터링.
    - 해결: `apps/backend/internal/browse/handler/browse_handler.go:51` 라인 수정.
        - 변경 전: `h.browseService.ListDirectory(true, targetPath)`
        - 변경 후: `h.browseService.ListDirectory(false, targetPath)`
    - 결과: 오른쪽 FolderContent에서 폴더와 파일이 모두 정상 표시.
    - Playwright 브라우저 테스트 완료: 파일 아이콘, 크기, 수정일 모두 정상 표시 확인.

- **파일 다운로드 기능 구현 완료** (2026-02-04):
    - 백엔드: `/api/browse/download` 엔드포인트 추가.
        - 파일 경로를 쿼리 파라미터로 받아 파일 다운로드 제공.
        - Content-Disposition 헤더로 파일명 설정.
        - 디렉토리 다운로드 방지, 권한 및 존재 여부 검증.
    - 프론트엔드: FolderContent에서 파일 클릭 시 다운로드.
        - 폴더: 클릭 시 해당 폴더로 이동 (기존 동작 유지).
        - 파일: `<a href="/api/browse/download?path=..." download>` 링크로 다운로드.
    - 수정 파일:
        - `apps/backend/internal/browse/handler/browse_handler.go` (handleDownload 추가)
        - `apps/frontend/src/features/browse/components/FolderContent.tsx` (파일 링크 수정)
    - Playwright 브라우저 테스트 완료: README.md 다운로드 정상 작동 확인.

- **Space 경로 보안 강화 완료** (2026-02-04):
    - 문제: Space로 할당되지 않은 시스템 경로에도 접근 가능한 보안 취약점.
    - 해결: Space 경로 검증 기능 추가.
    - 백엔드:
        - `browse_handler.go`에 `isPathAllowed` 함수 추가.
        - 요청 경로가 등록된 Space의 하위 경로인지 검증.
        - Space가 없을 때는 모든 경로 허용 (하위 호환성).
        - `system=true` 쿼리 파라미터로 시스템 탐색 모드 지원 (Space 생성용).
        - browse/download API에서 경로 검증 수행.
    - 프론트엔드:
        - `useBrowseApi.ts`: `fetchDirectoryContents`에 `systemMode` 파라미터 추가.
        - `FolderTree.tsx`: Space 생성 모달(`showBaseDirectories`)에서 `systemMode=true` 전달.
    - 수정 파일:
        - `apps/backend/internal/browse/handler/browse_handler.go`
        - `apps/backend/main.go` (spaceService 주입)
        - `apps/frontend/src/features/browse/hooks/useBrowseApi.ts`
        - `apps/frontend/src/features/browse/components/FolderTree.tsx`
    - 결과:
        - 일반 탐색: Space 경로만 접근 가능, 403 에러로 차단.
        - Space 생성: 시스템 전체 탐색 가능 (충돌 없음).
    - Playwright 브라우저 테스트 완료: Space 탐색 정상, 시스템 탐색 정상.

- **파일/폴더 컨텍스트 메뉴 구현 완료** (2026-02-05):
    - 상위 폴더 버튼 삭제: Breadcrumb만으로 탐색하도록 UI 단순화.
    - 파일/폴더 우클릭 컨텍스트 메뉴 추가:
        - 파일: "다운로드", "이름 변경", "삭제" 메뉴.
        - 폴더: "이름 변경", "삭제" 메뉴 (다운로드 제외).
    - 구현:
        - `FolderContent.tsx`: 컨텍스트 메뉴 상태 관리 및 렌더링.
        - Table의 `onRow` 이벤트에 `onContextMenu` 추가.
        - Menu 컴포넌트로 컨텍스트 메뉴 표시.
        - 파일 타입에 따라 메뉴 항목 조건부 표시.
    - TODO: 이름 변경, 삭제 기능 백엔드 API 및 실제 동작 구현.
    - Playwright 브라우저 테스트 완료: 상위 폴더 버튼 제거 확인, 파일/폴더별 컨텍스트 메뉴 정상 작동.

- **파일/폴더 이름 변경 및 삭제 기능 구현 완료** (2026-02-05):
    - 파일 이름 클릭 시 다운로드 제거: 우클릭 메뉴로만 다운로드 가능.
    - 백엔드 API 추가:
        - `/api/browse/rename`: 파일/폴더 이름 변경 (POST).
        - `/api/browse/delete`: 파일/폴더 삭제 (POST).
        - Space 경로 검증: 요청 경로와 새 경로 모두 허용된 Space 내부인지 확인.
        - 폴더 삭제: `os.RemoveAll`로 하위 파일 포함 전체 삭제.
    - 프론트엔드 구현:
        - 이름 변경 모달: 현재 이름이 입력 필드에 표시, Enter 키로 확인.
        - 삭제 확인 모달: `Modal.confirm`으로 확인 후 삭제.
        - API 호출 후 성공/실패 메시지 표시 (`message.success/error`).
        - 작업 완료 후 디렉토리 목록 자동 새로고침.
    - 수정 파일:
        - `apps/backend/internal/browse/handler/browse_handler.go`
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
    - Playwright 브라우저 테스트 완료:
        - 파일 이름 클릭 시 다운로드 안 됨 확인.
        - 이름 변경 모달 및 실제 변경 작동 확인.
        - 삭제 확인 모달 및 실제 삭제 작동 확인.
        - 목록 자동 새로고침 확인.

- **파일 업로드 기능 구현 완료** (2026-02-05):
    - 백엔드 API 추가:
        - `POST /api/browse/upload`: multipart/form-data로 파일 업로드.
        - 요청: `file` (파일), `targetPath` (업로드 대상 디렉토리), `overwrite` (선택, 덮어쓰기 여부).
        - Space 경로 검증: 업로드 대상 경로가 Space 내부인지 확인.
        - 파일 중복 확인: 동일 이름 파일 존재 시 409 Conflict 에러 (overwrite=false).
        - 덮어쓰기 지원: `overwrite=true`일 때 기존 파일 덮어쓰기.
        - 최대 업로드 크기: 32MB.
    - 프론트엔드 구현:
        - Ant Design `Upload.Dragger` 컴포넌트 사용.
        - Drag & Drop 또는 클릭으로 파일 선택.
        - `customRequest`로 커스텀 업로드 로직 구현.
        - 409 에러 발생 시 `Modal.confirm`으로 덮어쓰기 확인.
        - 덮어쓰기 확인 시 `overwrite=true`로 재업로드.
        - 업로드 성공 시 메시지 표시 및 목록 자동 새로고침.
        - FolderContent 상단에 업로드 영역 배치.
    - 수정 파일:
        - `apps/backend/internal/browse/handler/browse_handler.go` (handleUpload 추가)
        - `apps/frontend/src/features/browse/components/FolderContent.tsx` (Upload.Dragger 추가)
    - Chrome Extension 브라우저 테스트 완료:
        - Drag & Drop 영역 정상 표시.
        - 파일 업로드 API 정상 작동 (test-upload.txt 업로드 성공).
        - 업로드된 파일이 목록에 즉시 표시됨.
        - 중복 파일 업로드 시 덮어쓰기 확인 모달 정상 작동.
        - 덮어쓰기 기능 정상 작동 (duplicate-test.txt 테스트 완료).

- **뷰 전환 기능 구현 완료** (2026-02-05):
    - 테이블 뷰와 그리드 뷰를 전환할 수 있는 기능 추가.
    - 구현 내용:
        - 뷰 모드 state 추가 ('table' | 'grid').
        - Breadcrumb 우측에 뷰 전환 버튼 추가.
        - 버튼 아이콘: UnorderedListOutlined (테이블), AppstoreOutlined (그리드).
        - 활성 버튼은 primary 타입으로 강조.
    - 그리드 뷰 구현:
        - Ant Design Row/Col과 Card 컴포넌트 사용.
        - 반응형 그리드: xs=12, sm=8, md=6, lg=4, xl=3 (화면 크기별 열 수 조정).
        - 카드 내용: 큰 아이콘 (48px), 파일 이름, 파일 크기 (파일만).
        - 폴더 더블 클릭 시 이동 기능 유지.
        - 우클릭 컨텍스트 메뉴 기능 유지.
    - 수정 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx` (뷰 전환 버튼, 그리드 뷰 추가)
    - Chrome Extension 브라우저 테스트 완료:
        - 뷰 전환 버튼 정상 표시.
        - 테이블 ↔ 그리드 양방향 전환 정상 작동.
        - 그리드 뷰에서 파일/폴더 정상 표시.
        - 그리드 뷰에서 폴더 더블 클릭 이동 정상 작동.

- **업로드 UI 개선 완료** (2026-02-05):
    - Upload.Dragger 섹션 제거, 화면 공간 효율화.
    - 전체 영역 드래그 앤 드롭 지원:
        - 파일 드래그 시 반투명 파란색 오버레이 표시.
        - "파일을 놓아 업로드" 메시지 및 아이콘 표시.
        - 드롭 시 파일 업로드 시작.
    - 업로드 버튼 추가:
        - 위치: Breadcrumb 우측, 뷰 전환 버튼 옆.
        - UploadOutlined 아이콘 + "업로드" 텍스트.
        - 클릭 시 파일 선택 대화상자 열림.
    - 숨겨진 file input으로 파일 선택 처리.
    - 드래그/버튼 모두 동일한 업로드 로직 사용 (중복 확인 포함).
    - 수정 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx` (드래그 이벤트, 업로드 버튼 추가)

- **Breadcrumb 절대 경로 버그 수정 완료** (2026-02-06):
    - 문제: 하위 폴더(2+ depth) 이동 시 breadcrumb이 절대 경로로 표시됨.
    - 원인:
        - FolderTree에서 Space 노드가 아닌 하위 폴더 선택 시 Space 정보 없이 경로만 전달.
        - FolderContent에서 폴더 더블 클릭 시 `onPathChange(path)` 호출로 `selectedSpace` 미업데이트.
        - `selectedSpace`가 현재 경로와 동기화되지 않아 breadcrumb 로직 실패.
    - 해결:
        - `MainLayout/index.tsx`의 `handlePathSelect` 함수 수정.
        - Space가 명시적으로 전달되지 않으면 현재 경로에서 해당하는 Space 자동 탐색.
        - `spaces.find(s => path.startsWith(s.space_path))`로 매칭되는 Space 찾기.
        - 찾은 Space를 `selectedSpace`에 설정하여 breadcrumb이 항상 올바른 상대 경로 표시.
    - 수정 파일:
        - `apps/frontend/src/components/layout/MainLayout/index.tsx` (handlePathSelect 로직 개선)
    - Chrome Extension 브라우저 테스트 완료:
        - Space 선택 후 하위 폴더로 이동 시 상대 경로 정상 표시 ("헬로 / Test Folder").
        - 2+ depth 폴더 이동 시에도 상대 경로 정상 표시 ("헬로 / Test Folder / Contents / Frameworks").

- **폴더 ZIP 다운로드 기능 구현 완료** (2026-02-06):
    - 백엔드: `handleDownload()` 함수 수정하여 폴더/파일 자동 구분 처리.
    - 백엔드: `downloadFolderAsZip()` 함수 추가로 폴더 압축 다운로드 지원.
        - Go 표준 라이브러리 `archive/zip` 사용 (외부 의존성 없음).
        - HTTP response에 직접 스트리밍 (메모리 효율적).
        - `filepath.Walk()`로 재귀적 폴더 탐색.
        - 심볼릭 링크 자동 스킵 (보안).
        - 압축 파일명: `{folderName}.zip`.
    - 프론트엔드: 컨텍스트 메뉴에 폴더 다운로드 옵션 추가.
        - 파일: "다운로드" 메뉴 표시.
        - 폴더: "폴더 다운로드 (ZIP)" 메뉴 표시.
    - 수정 파일:
        - `apps/backend/internal/browse/handler/browse_handler.go` (import 추가, handleDownload 수정, downloadFolderAsZip 추가)
        - `apps/frontend/src/features/browse/components/FolderContent.tsx` (컨텍스트 메뉴 조건 수정)
    - Chrome Extension 브라우저 테스트 완료:
        - 폴더 우클릭 시 "폴더 다운로드 (ZIP)" 메뉴 정상 표시.
        - 파일 우클릭 시 "다운로드" 메뉴 정상 표시.
        - Test Folder.zip 다운로드 성공.
        - zip 파일 내부에 모든 하위 폴더/파일 구조 정상 포함.

- **그리드 뷰 기본값 변경 완료** (2026-02-06):
    - 파일 탐색기의 기본 뷰를 테이블에서 그리드로 변경.
    - `FolderContent.tsx`의 `viewMode` 초기값을 'table'에서 'grid'로 수정.
    - 수정 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx` (viewMode 기본값 변경)
    - Chrome Extension 브라우저 테스트 완료:
        - Space 선택 시 그리드 뷰가 기본으로 표시.
        - 파일/폴더가 카드 형태로 정상 표시.
        - 뷰 전환 버튼에서 그리드 버튼이 활성화 상태.

- **레이아웃 여백 통일 완료** (2026-02-07):
    - 모든 영역의 수평 패딩을 8-grid 기준 16px로 일괄 통일.
    - Header: antd 기본값(0 50px) → 명시적 `0 16px`.
    - 사이드바 헤더: `12px 16px` → `16px` (12px 8-grid 위반 수정).
    - 사이드바 트리: `8px` → `8px 16px` (수평 패딩 통일).
    - 메인 콘텐츠: `24px` → `16px` (수평 패딩 통일).
    - 수정 파일: `MainLayout/index.tsx`, `MainSider.tsx`, `FileExplorer.tsx`.
    - Chrome Extension 브라우저 테스트 완료: 다크/라이트 모드, 그리드/테이블 뷰 모두 확인.

- **서버 상태 표시 개선** (2026-02-07):
    - Status popover 위치를 텍스트 바로 아래로 변경 (`bottomLeft`).
    - 접근 가능한 호스트 주소 목록 표시 (`net.InterfaceAddrs()`).
    - 각 프로토콜의 포트 및 경로 표시 (HTTP: `:3000/api/`, WebDAV: `:3000/dav/`).
    - 백엔드: `ProtocolStatus`에 `Port`, `Path` 필드 추가, `StatusResponse`에 `Hosts` 필드 추가.
    - 프론트엔드: `ServerStatus.tsx` popover에 호스트, 포트, 경로 정보 표시.

- **WebDAV 루트 디렉토리 가상 Space 목록 노출** (2026-02-07):
    - `/dav/` 접근 시 400 에러 → 모든 Space를 가상 폴더로 표시하도록 수정.
    - `SpaceFS` 커스텀 `webdav.FileSystem` 구현 (`spacefs.go`).
    - 루트(`/`) PROPFIND 시 Space 목록을 가상 디렉토리로 반환.
    - `/{spaceName}/...` 경로는 실제 OS 파일시스템으로 위임.
    - `service.go`에 `GetRootHandler()` 추가, `webdav_handler.go`에서 루트 요청 위임.
    - curl PROPFIND 테스트 완료: 모든 Space가 폴더로 정상 표시.

- **사이드바 트리 노드 증식 버그 수정** (2026-02-07):
    - 문제: 여러 Space를 열고 닫을 때 하위 폴더 노드가 중복 생성.
    - 원인: 같은 디렉토리를 가리키는 Space들의 하위 노드 key가 파일 경로로 동일하여 Ant Design Tree key 충돌.
    - 해결: 자식 노드 key에 부모 Space prefix 추가 (`space-{id}::{path}`), `expandedKeys` 명시적 관리.
    - Chrome Extension 테스트 완료: Space 열고 닫기 반복 시 증식 없음 확인.

- **컨텍스트 메뉴 UI 개선** (2026-02-08):
    - Ant Design `Menu` + `position: fixed` → `Dropdown` 컴포넌트 전환.
    - 공통 `ContextMenu` 컴포넌트 생성 (`src/components/ContextMenu.tsx`).
    - FolderContent, FolderTree의 중복 닫기 로직(document click 리스너) 제거.
    - Dropdown의 자동 화면 경계 보정, 페이드 애니메이션 적용.
    - ESC 키 + 외부 클릭 닫기 지원.
    - Chrome Extension 테스트 완료: 파일/폴더/Space 우클릭 메뉴 정상 동작.

- **새 폴더 만들기 기능 구현 완료** (2026-02-08):
    - 백엔드 API 추가:
        - `POST /api/browse/create-folder`: 폴더 생성 엔드포인트.
        - 요청: `{ parentPath, folderName }`.
        - Space 경로 검증: `isPathAllowed`로 부모 경로 확인.
        - 폴더명 유효성 검증: 특수문자(`/`, `\`, `:` 등) 차단.
        - 중복 폴더 확인: 동일 이름 폴더 존재 시 409 Conflict.
        - `os.Mkdir(folderPath, 0755)`로 폴더 생성.
    - 프론트엔드 구현:
        - 빈 영역 우클릭 컨텍스트 메뉴 추가.
        - 빈 영역 감지 로직: `!target.closest('.ant-card') && !target.closest('tr')`.
        - "새 폴더 만들기" 메뉴 아이템 추가 (FolderOutlined 아이콘).
        - 모달: Input autoFocus, Enter 키 생성, 취소/생성 버튼.
        - 생성 성공 시 메시지 표시 및 목록 자동 새로고침.
    - 수정 파일:
        - `apps/backend/internal/browse/handler/browse_handler.go` (handleCreateFolder, RegisterRoutes)
        - `apps/frontend/src/features/browse/components/FolderContent.tsx` (빈 영역 메뉴, 모달)
    - Chrome Extension 테스트 완료:
        - 빈 영역 우클릭 시 "새 폴더 만들기" 메뉴 정상 표시.
        - 모달 열림, Input autoFocus 정상 작동.
        - 폴더 생성 후 목록 자동 새로고침 확인 (MyNewFolder 생성 성공).
    - 버그 수정 (TypeScript 빌드 에러):
        - 미사용 import 제거: `Upload`, `UploadProps`.
        - 이벤트 핸들러 파라미터 타입 명시:
            - `onContextMenu`: `React.MouseEvent<HTMLElement>`
            - `onChange`: `React.ChangeEvent<HTMLInputElement>`
            - `handleExpand`: `React.Key[]`
            - `handleRightClick`: `{ event: React.MouseEvent; node: any }`
        - 프론트엔드 재빌드 후 정상 동작 확인.

- **파일 브라우저 정렬 기능 구현 완료** (2026-02-09):
    - 정렬 상태 관리 (sortBy, sortOrder).
    - 폴더 우선 정렬 로직 구현 (모든 정렬 옵션에서 폴더가 파일보다 먼저 표시).
    - 그리드 뷰: 상단 정렬 드롭다운 추가 (이름/수정일/크기 × 오름/내림차순 = 6가지 옵션).
    - 테이블 뷰: 컬럼 헤더 클릭 정렬 (onChange 핸들러로 정렬 상태 업데이트).
    - 뷰 전환(테이블 ↔ 그리드) 시 정렬 상태 유지.
    - 기본 정렬: 폴더 우선 + 이름 오름차순.
    - useMemo로 sortedContent 최적화.
    - Chrome Extension 브라우저 테스트 완료: 모든 정렬 옵션 정상 작동 확인.

- **드래그 앤 드롭 파일 이동 기능 구현 완료** (2026-02-09):
    - Google Drive 스타일 드래그 앤 드롭으로 파일/폴더 이동.
    - 모든 파일/폴더 카드에 `draggable={true}` 속성 추가.
    - 드래그 소스 처리:
        - `onDragStart`: 선택되지 않은 항목 드래그 시 자동 선택, dataTransfer에 경로 저장.
        - 데이터 타입: `application/json` with `{type: 'cohesion-internal', paths: [...]}`
    - 드롭 타겟 처리:
        - 폴더에만 드롭 가능, `onDragOver`로 시각적 피드백 (파란 테두리/배경).
        - `onDrop`: 폴더에 드롭 시 해당 폴더로 이동, 자기 자신 이동 방지.
        - 빈 영역 드롭: 현재 폴더에 이동 (같은 폴더면 무시).
    - 외부 파일 업로드와 내부 이동 구분:
        - `dataTransfer.files.length > 0`: 외부 파일 업로드.
        - `dataTransfer.getData('application/json')`: 내부 파일 이동.
    - 텍스트 선택 방지: `userSelect: 'none'` CSS 적용.
    - 다중 선택 지원: 선택된 여러 파일을 한 번에 드래그 이동.
    - 기존 우클릭 메뉴 이동/복사 기능과 병행 사용 가능.
    - 수정 파일: `FolderContent.tsx`
    - Chrome Extension 브라우저 테스트 완료:
        - 단일 파일 드래그 이동 (README.md → docs 폴더).
        - 다중 파일 드래그 이동 (GEMINI.md + package.json → dist 폴더).
        - 외부 파일 업로드 드래그와 충돌 없음.
        - 텍스트 선택 방지 확인.

- **Shift 클릭 범위 선택 버그 수정** (2026-02-09):
    - 문제: 정렬된 상태에서 Shift+클릭 시 원치 않은 항목 선택.
    - 원인: `content` 배열 사용, 화면은 `sortedContent` 표시로 인덱스 불일치.
    - 해결: `handleItemClick`의 Shift+클릭 로직에서 `sortedContent` 사용.
    - 수정 파일: `FolderContent.tsx`
    - 테스트: 크기 정렬 후 9개 항목 범위 선택 성공.
    - 결과: 정렬 상태와 무관하게 화면 순서대로 범위 선택 정상 작동.

- **gopsutil v4 업그레이드** (2026-02-09):
    - macOS 12.0 deprecated API 경고 제거를 위한 의존성 업그레이드.
    - v3.21.11 → v4.26.1 업그레이드.
    - import 경로 변경: `github.com/shirou/gopsutil/disk` → `github.com/shirou/gopsutil/v4/disk`.
    - 빌드 경고 제거, 정상 작동 확인.
    - 수정 파일: `go.mod`, `go.sum`, `internal/browse/service.go`.

- **Space ID 검증 버그 수정** (2026-02-09):
    - 문제: `/api/spaces/` (빈 ID) 요청 시 파싱 에러 발생.
    - 해결: `handleSpaceByID`에서 빈 ID 사전 체크 추가.
    - 에러 메시지 개선: "Space ID is required", "Invalid space ID format".
    - 추가 수정: `/api/spaces` 경로가 `handleSpaceByID`로 잘못 라우팅되는 문제 해결.
    - Chrome extension으로 브라우저 테스트 완료.
    - 수정 파일: `internal/space/handler/space_handler.go`.

- **API 중복 호출 최적화** (2026-02-09):
    - 문제: Space 클릭 시 동일 API 3번 호출 (`/api/browse?path=...`).
    - 원인: StrictMode + 두 개의 독립적인 setState (selectedPath, selectedSpace).
    - 해결: StrictMode 제거, 단일 state 객체로 통합, useCallback 메모이제이션.
    - 결과: 3번 → 2번 호출로 개선 (33% 감소).
    - 남은 이슈: 2번 호출 여전히 발생 (추가 조사 필요).
    - 수정 파일: `main.tsx`, `MainLayout/index.tsx`.

- **Zustand 전역 상태 관리 도입** (2026-02-09, 진행 중):
    - **Phase 1 완료**: Theme Store (다크모드 설정, localStorage 연동).
    - **Phase 2 완료**: Context Menu Store (ContextMenuContext 완전 대체).
    - **Phase 3 완료**: Space Store (Props drilling 제거, CRUD actions 통합).
    - **Phase 4 남음**: Browse Store (파일 탐색 경로, 컨텐츠 상태 통합).
    - Props Drilling 대폭 감소, 코드 일관성 향상, 확장성 개선.
- **박스 선택 기능 버그 수정 완료** (2026-02-10):
    - 문제 1: 익스플로러 바깥에서도 드래그 동작.
        - 해결: `handleMouseDown`에서 `containerRef` 범위 체크 추가.
        - 컨테이너 외부 클릭 시 박스 선택 시작 방지.
    - 문제 2: 드래그해도 파일/폴더 다중선택 안 됨.
        - 해결: `useBoxSelection` 의존성 배열에서 `containerRef` 제거.
        - 핸들러가 올바르게 갱신되어 ref.current 참조 정상화.
    - 문제 3: TypeScript 빌드 에러 (3개).
        - `useBoxSelection`: `containerRef` 타입을 구조적 타이핑(`{ current: HTMLElement | null }`)으로 수정.
        - `FolderContentTable`: `ColumnsType` → `TableColumnsType` import 변경.
        - `useFileOperations`: `error.message` 타입 가드 추가.
    - 문제 4: 박스 드래그 후 마우스 놓으면 선택 해제됨.
        - 원인: `mouseup` → `click` 이벤트 순서로 `handleContainerClick`이 선택 해제.
        - 해결: `wasRecentlySelecting` 플래그 추가하여 박스 선택 직후 click 이벤트 무시.
        - `handleMouseUp`에서 선택 확정 후 플래그 설정, 다음 이벤트 루프에서 해제.
    - 문제 5: 복사/이동 버튼 클릭 시 모달 열리면서 선택 해제됨.
        - 원인: 버튼 클릭 이벤트가 버블링되어 `handleContainerClick`까지 도달.
        - `handleContainerClick`이 버튼 클릭을 빈 영역 클릭으로 인식하여 선택 해제.
        - 해결: `closest('button')`, `closest('input')` 체크 추가하여 버튼/입력 필드 클릭 시 선택 유지.
    - 수정 파일:
        - `apps/frontend/src/features/browse/hooks/useBoxSelection.ts`
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent/FolderContentTable.tsx`
        - `apps/frontend/src/features/browse/hooks/useFileOperations.ts`
        - `apps/frontend/src/features/browse/constants.tsx`
    - 사용자 테스트 완료: 박스 선택 정상 작동 확인.

- **FolderContent.tsx 리팩토링 Phase 2 완료** (2026-02-10):
    - `useModalManager` 훅 생성하여 모달 상태 관리 통합.
    - 3개 모달(rename, createFolder, destination) 상태를 단일 훅으로 관리.
    - TypeScript 제네릭으로 타입 안전성 확보.
    - 라인 수: 380줄 → 366줄 (-14줄, 3.7% 감소).
    - 중복 코드 제거, 일관성 향상, 확장성 개선.
    - 향후 모달 추가 시 useModalManager에 타입만 추가하면 됨.
    - 수정 파일:
        - `apps/frontend/src/features/browse/hooks/useModalManager.ts` (신규)
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`

- **FolderContent.tsx 리팩토링 Phase 3 완료** (2026-02-10):
    - `useSortedContent` 훅 생성하여 정렬 로직 분리.
    - 폴더 우선 + sortConfig 기반 정렬 로직을 재사용 가능한 훅으로 추출.
    - 라인 수: 366줄 → 341줄 (-25줄, 6.8% 감소).
    - **전체 리팩토링 효과**: 1,194줄 → 341줄 (**71.4% 감소**).
    - 정렬 로직 재사용 가능, 테스트 용이성 향상.
    - 수정 파일:
        - `apps/frontend/src/features/browse/hooks/useSortedContent.ts` (신규)
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`

- **Settings 페이지 TypeScript 타입 오류 수정 완료** (2026-02-11):
    - 문제: Implicit any 타입 오류 10개 발생 (Settings 관련 컴포넌트).
    - 해결:
        - 이벤트 핸들러 파라미터에 명시적 타입 추가.
        - Menu onClick: `{ key: string }`.
        - Select onChange: `string` → `SortBy`, `SortOrder` 타입 캐스팅.
        - Switch onChange: `boolean`.
        - InputNumber onChange: `number | null`.
    - 수정 파일:
        - `apps/frontend/src/pages/Settings/index.tsx` (Menu onClick 타입 추가)
        - `apps/frontend/src/pages/Settings/sections/FileSettings.tsx` (Select 타입 추가 및 캐스팅)
        - `apps/frontend/src/pages/Settings/sections/ServerSettings.tsx` (Switch, InputNumber 타입 추가)
    - 결과: Lint 및 TypeScript 체크 통과 (0 errors).

- **박스 선택 누적 기능 구현 완료** (2026-02-11, #25):
    - 문제: 박스 선택 중 스크롤 시 박스를 벗어난 항목이 선택 해제되는 직관적이지 않은 UX.
    - 해결: 드래그 영역에 한 번이라도 걸린 항목은 계속 선택 유지 (누적 방식).
    - 구현:
        - `accumulatedSelection` ref 추가로 드래그 중 교차한 모든 항목 추적.
        - `handleMouseMove`, `handleScroll`, `handleMouseUp`에서 교차 항목 누적.
        - Ctrl/Shift 모드 지원 유지 (일반: 누적, Shift: 초기+누적, Ctrl: 토글).
        - `updateSelection` 함수 제거하고 각 핸들러에서 직접 선택 계산.
    - 수정 파일:
        - `apps/frontend/src/features/browse/hooks/useBoxSelection.ts` (126줄 추가, 74줄 삭제)
    - Issue: #25 (https://github.com/lteawoo/Cohesion/issues/25)
    - Commit: `1c07bed` (feat: 박스 선택 시 스크롤로 누적 선택 기능 구현)
    - 결과: Grid 뷰에서 드래그 + 스크롤로 많은 파일을 효율적으로 선택 가능, 직관적인 UX 제공.

- **Grid 뷰 이미지 썸네일 표시 기능 구현 완료** (2026-02-11):
    - 문제: Grid 뷰에서 이미지 파일이 일반 파일 아이콘으로 표시되어 이미지 파일 식별이 어려움.
    - 해결: 이미지 파일 자동 감지 및 썸네일 표시 기능 추가.
    - 구현:
        - `ImageThumbnail` 컴포넌트: 로딩/에러 상태 처리, 브라우저 네이티브 lazy loading 활용.
        - `fileTypeUtils` 유틸리티: 이미지 확장자 감지 함수 (jpg, jpeg, png, gif, webp, svg, bmp, ico).
        - `FolderContentGrid`: 이미지 파일 감지 시 썸네일 렌더링, 일반 파일은 기존 아이콘 유지.
        - 기존 `/api/browse/download` 엔드포인트 활용 (별도 썸네일 API 불필요).
        - 프론트엔드 직접 로드 방식 채택 (빠른 구현, 간단한 아키텍처).
    - 수정 파일:
        - `apps/frontend/src/features/browse/components/ImageThumbnail.tsx` (신규)
        - `apps/frontend/src/features/browse/utils/fileTypeUtils.ts` (신규)
        - `apps/frontend/src/features/browse/components/FolderContent/FolderContentGrid.tsx`
    - Commit: `6fade96` (feat: Grid 뷰에 이미지 썸네일 표시 기능 추가)
    - 결과: Grid 뷰에서 이미지 파일 미리보기 가능, 파일 식별성 향상.

- **이동/복사 모달 Space 트리 구조 개선 완료** (2026-02-11):
    - 문제: 이동/복사 모달의 FolderTree가 잘못된 방식으로 동작.
        - Space A에서 파일 선택 → 모달 열기 → Space A만 표시 (Space B, C로 이동 불가).
        - Space 미선택 시 시스템 디렉토리 노출 (보안/UX 문제).
    - 해결: FolderTree props 제거하여 모든 Space 목록 표시.
        - `rootPath`, `rootName`, `showBaseDirectories` props 제거 (3줄 삭제).
        - FolderTree가 자동으로 모든 Space 표시 (Zustand store 활용).
        - 메인 사이드바와 동일한 동작 방식.
    - 기술적 고려사항:
        - Space 경로 검증: 백엔드 `isPathAllowed`로 Space 외부 이동 차단.
        - 하위 폴더 순환 참조 방지: 프론트엔드에서 사전 체크.
        - Space 목록 동기화: Zustand store에서 자동으로 최신 목록 표시.
    - 수정 파일:
        - `apps/frontend/src/features/browse/components/DestinationPickerModal.tsx`
    - Commit: `85ddd94` (fix: 이동/복사 모달이 모든 Space 표시하도록 수정)
    - 결과: Space 간 파일 이동/복사 가능, 시스템 디렉토리 노출 방지, UX 개선.

- **Breadcrumb 및 모달 경로 표시 버그 수정 완료** (2026-02-11):
    - 문제 1: 하위 폴더 이동 시 Breadcrumb이 절대 경로로 표시됨.
        - 원인: `browseStore`의 `fetchDirectoryContents`가 `selectedSpace`를 업데이트하지 않음.
        - 해결: `fetchDirectoryContents`에서 현재 경로에 해당하는 Space를 자동으로 찾아서 설정.
        - `useSpaceStore`를 import하여 `spaces`에서 매칭되는 Space 탐색.
    - 문제 2: 이동/복사 모달 하단에 절대 경로 표시.
        - 해결: `DestinationPickerModal`에서 Space 정보를 받아서 상대 경로로 표시.
        - `selectedDestinationSpace` state 추가.
        - `handleSelect`에서 Space 정보도 함께 저장.
        - `displayPath` 계산 로직 추가 (Space 상대 경로).
    - 문제 3: 모달 하단 배경색이 다크모드에서 밝게 표시됨.
        - 해결: Ant Design 테마 토큰 사용 (`token.colorBgContainer`, `token.colorBorder`).
        - 하드코딩된 `#f0f0f0` 배경색 제거.
    - 수정 파일:
        - `apps/frontend/src/stores/browseStore.ts` (fetchDirectoryContents 수정)
        - `apps/frontend/src/features/browse/components/DestinationPickerModal.tsx` (Space 상대 경로, 다크모드 지원)
    - 결과:
        - Breadcrumb: "Root / Users / ... / Test Folder" → "헬로 / Test Folder" ✅
        - 모달 하단: "/Users/.../MyNewFolder" → "헬로/MyNewFolder" ✅
        - 다크모드 배경색 정상 작동 ✅

- **이동/복사 모달 폴더 선택 시 선택 해제 버그 수정 완료** (2026-02-13):
    - 문제: 파일/폴더를 선택한 상태에서 이동/복사 모달을 열고 모달 트리에서 폴더를 선택하면, 원래 선택된 항목이 해제되어 작업이 실패하거나 UX가 불안정함.
    - 원인: `FolderContent`의 컨테이너 `onClick` 핸들러(`handleContainerClick`)가 React Portal로 렌더링된 Modal 내부 클릭 이벤트까지 버블링으로 받아 `clearSelection()`을 실행.
    - 해결: `handleContainerClick`에서 `.ant-modal` 내부 클릭을 선택 해제 대상에서 제외.
    - 수정 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
    - 검증:
        - `pnpm -C apps/frontend lint` 통과.
        - `pnpm -C apps/frontend build` 통과.
        - 브라우저 수동 테스트: 이동 모달에서 폴더 선택 후 취소 시 `1개 선택됨` 상태 유지 확인.
        - 스크린샷: `.playwright-mcp/move-modal-selection-fixed.png`

## 다음 작업 (Next Steps)
- **FolderContent.tsx 리팩토링** (Phase 4: 검증 및 테스트).
- 검색 기능 구현.
- 이미지/텍스트 파일 미리보기 기능 구현.

- **이동/복사 모달 source selection 안정성 보강 완료** (2026-02-13):
    - 기존 모달이 실시간 `selectedItems`를 참조해 외부 상태 변화 시 source가 유실될 수 있는 구조를 개선.
    - `DestinationModalData.sources` 스냅샷 도입으로 모달 오픈 시점 source를 고정.
    - 모달 열림 중에는 네비게이션 변화가 있어도 `clearSelection()`을 건너뛰도록 처리.
    - 결과: 모달 폴더 선택/탐색 과정에서 source selection이 유지되고 이동/복사 동작 안정성 개선.
- **이동/복사 모달 취소 시 selection 복원 보강 완료** (2026-02-13):
    - 모달 취소/닫힘 타이밍에서 selection이 유실되는 케이스를 방지하기 위해 source snapshot 복원 로직 추가.
- **파일 작업 후 트리 자동 반영 구조 개선 완료** (2026-02-13):
    - `browseStore`에 `treeRefreshVersion`/`invalidateTree` 추가.
    - 파일 작업 성공 시 트리 invalidate 수행 (`rename`, `create-folder`, `delete`, `delete-multiple`, `move`, `copy`).
    - `FolderTree`가 invalidate 버전을 구독하여 로컬 트리 캐시를 초기화하고 최신 트리 재구성.
    - 브라우저 검증: `MyNewFolder/1234` 삭제 후 좌측 트리 재확장 시 노드 제거 반영 확인.
- **문서 위치 정리 완료** (2026-02-13):
    - 실행 환경 문서를 `docs/AGENTS.md`에서 루트 `AGENTS.md`로 이동.
    - `CLAUDE.md`, `GEMINI.md`가 루트 `AGENTS.md` 내용을 직접 포함하도록 동기화.
    - `master_rule_v2.md`의 시각 검증 규칙을 `chrome-extention` 기준으로 정리.

- **파일 익스플로러 외곽 여백 드래그 미동작 원인 확인 및 보강** (2026-02-18):
    - 원인: `useBoxSelection`에 추가된 시작영역 확장 옵션(`startAreaOutsetPx`)이 `FolderContent` 호출부에 연결되지 않아 실제 동작은 기존 경계(루트 컨테이너 내부)로 고정.
    - 조치: `useBoxSelection` 호출에 `startAreaOutsetPx: 16` 연결.
    - 수정 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
    - 검증:
        - `pnpm -C apps/frontend exec tsc --noEmit` 통과.

- **박스선택 오버레이 클리핑 해소** (2026-02-18):
    - 원인: 오버레이가 `selectionContainer` 내부(overflow auto)에서 렌더링되어 컨테이너 경계 밖에서 시각적으로 잘림.
    - 조치: 오버레이를 `FolderContent` 루트 레이어로 이동하고, `selectionContainer` 위치/스크롤 기준 오프셋 보정값(`offsetX/offsetY`) 적용.
    - 수정 파일:
        - `apps/frontend/src/features/browse/components/FolderContent.tsx`
        - `apps/frontend/src/features/browse/components/FolderContent/BoxSelectionOverlay.tsx`
    - 검증:
        - `pnpm -C apps/frontend exec tsc --noEmit` 통과.

- **프론트 빌드 타입 에러 정리** (2026-02-18):
    - `FolderContentTable` 메뉴 클릭 핸들러 타입 명시 및 `Table<FileNode>` 제네릭 지정.
    - `useContextMenu` 빈영역 메뉴 아이템 null/undefined 가드 추가.
    - 검증:
        - `pnpm -C apps/frontend build` 통과.

- **상단 로우 드래그 시작 정책 조정** (2026-02-18):
    - 기본 브레드크럼/툴바 로우는 박스선택 드래그 시작 허용.
    - 선택 툴바(선택 N개 표시) 상태에서는 드래그 시작 제외 유지.
    - 인터랙티브 요소(버튼/입력/셀렉트/링크)에서는 드래그 시작 차단해 버튼 동작 보존.

- **PC 테이블 선택 반응/멀티선택 보정** (2026-02-18):
    - 테이블 row drag를 비활성화해 클릭 선택 반응 지연 체감 완화.
    - `useFileSelection`의 Shift 범위선택을 앵커 기반 표준 동작으로 정리(Shift: 범위 치환, Ctrl/Cmd+Shift: 범위 추가).
    - 컨텍스트 메뉴 선택 기준 배열을 `content`에서 `sortedContent`로 교정해 인덱스/앵커 불일치 보정.
    - 검증: `pnpm -C apps/frontend exec tsc --noEmit`, `pnpm -C apps/frontend build` 통과.

- **브레드크럼 툴바 스크롤/상단 여백 보정** (2026-02-18):
    - 툴바 컨테이너 `overflowX`를 `hidden`으로 조정해 불필요한 가로 스크롤바 제거.
    - 상단 로우 `marginTop`을 선택 툴바 노출 시에만 `8px` 적용(기본 브레드크럼 툴바는 `0px`).

- **상단 툴바/선택바 전환 시 본문 높이 점프 회귀 수정** (2026-02-18):
    - 원인: 상단 로우 `marginTop`이 상태별(기본툴바/선택툴바)로 달라져 아래 콘텐츠 높이가 재계산됨.
    - 조치: 상단 로우를 `slot height`(고정) 구조로 전환하고, 선택 툴바에만 내부 `marginTop` 적용.
    - 결과: 선택 툴바 on/off 전환 시 파일 목록 높이 점프 제거.

- **그리드 선택 시 레이아웃 밀림 보정** (2026-02-18):
    - 기존 선택 표시 `border: 2px`로 카드 박스 크기가 변해 그리드가 미세 이동.
    - 선택/드래그 강조를 `outline` 기반으로 변경해 레이아웃 영향 제거.

- **테이블 메타 라인 포맷 조정** (2026-02-18):
    - 테이블 뷰의 파일 항목 보조 텍스트를 `용량 | 날짜` 형식으로 변경.
    - 그리드 뷰 표기는 기존 유지.

- **경로 내비게이션 위치 재정렬** (2026-02-18):
    - 상단 툴바 breadcrumb 제거.
    - 하단 고정 경로바에 breadcrumb를 배치해 세그먼트 클릭 이동 기능 유지.
    - 경로바 클릭/포인터 이벤트가 selection 해제/박스선택 시작으로 전파되지 않도록 차단.

- **하단 경로바 텍스트 가독성 보정** (2026-02-18):
    - 경로바 기본 텍스트 색을 `colorTextSecondary` -> `colorText`로 상향.
    - breadcrumb 링크도 `color: inherit`로 통일해 회색 톤 문제 해소.

- **하단 경로바 라벨 UX 1차 적용** (2026-02-18):
    - `FolderOpenOutlined + 현재 경로` 라벨을 하단 breadcrumb 앞에 추가.
    - 모바일은 라벨을 `경로`로 축약.

- **스페이스/경로 아이콘 구분 적용** (2026-02-18):
    - 스페이스 트리 루트 노드에 `HddOutlined` 아이콘 적용.
    - 하단 breadcrumb 경로바에서 스페이스(`HddOutlined`)와 폴더(`FolderFilled`) 세그먼트 아이콘 분리 적용.
    - 경로바 보조 라벨은 제거하고 세그먼트 아이콘 중심으로 단순화.

- **스페이스/폴더 아이콘 정책 재조정** (2026-02-18):
    - 스페이스 트리 루트의 전용 아이콘 제거(텍스트-only).
    - 하단 경로바 breadcrumb는 스페이스/폴더 모두 동일한 `FolderFilled` 아이콘으로 통일.

- **브라우즈 선택 강조 다크모드 가시성 개선** (2026-02-19):
    - 선택/드래그오버 색상을 고정 RGBA에서 Ant 테마 토큰 기반(`--ant-colorPrimary*`)으로 전환.
    - 그리드/테이블이 공통 CSS 변수(`--browse-selection-*`)를 공유하도록 유지해 라이트/다크 간 톤 일관성 확보.

- **하단 경로바 overflow 대응 축약 적용** (2026-02-19):
    - 경로바 viewport 대비 breadcrumb 전체 폭을 `ResizeObserver`로 측정.
    - 실제 overflow 시에만 breadcrumb를 `첫 항목 + ... + 마지막 2개` 형태로 축약.
    - overflow가 해소되면 전체 breadcrumb로 자동 복원.

- **폴더 탐색 히스토리 툴바 추가** (2026-02-19):
    - 상단 툴바 좌측에 `이전(<) / 다음(>)` 버튼 추가.
    - 같은 스페이스 내 폴더 이동 시 경로 히스토리를 저장하고 버튼으로 탐색 가능하도록 연결.
    - 상단 툴바 우측에는 업로드/정렬/뷰모드 전환을 `margin-left: auto`로 우측 정렬.

- **모바일 파일 익스플로러 스크롤 입력 안정화** (2026-02-20):
    - 대상: 파일 익스플로러 `table/grid` 공통 컨테이너(`FolderContent`).
    - 조치:
        - 터치 pan 감지(`8px`) 시 롱프레스 타이머 취소.
        - pan 종료 후 짧은 탭 억제로 스크롤 직후 오탭 선택 방지.
        - 모바일 선택 바 캡처 이벤트의 `preventDefault` 제거(비버튼 대상 전파만 차단).
        - 루트 휠 라우팅을 모바일 브레이크포인트에서도 동작하도록 조정.
    - 검증:
        - `pnpm -C apps/frontend lint`
        - `pnpm -C apps/frontend exec tsc --noEmit`
        - `pnpm -C apps/frontend build`
        - Chrome DevTools 모바일 에뮬레이션에서 table/grid 모두 `touchmove` 시 롱프레스 비발동, 롱프레스 유지 시 선택바 발동 확인.

- **파일 익스플로러 휠 처리 단순화** (2026-02-20):
    - `FolderContent` 루트 `onWheelCapture` 커스텀 보정 제거.
    - `selectionContainer` 네이티브 스크롤 경로만 사용하도록 복귀.
    - 검증:
        - `pnpm -C apps/frontend lint`
        - `pnpm -C apps/frontend exec tsc --noEmit`
